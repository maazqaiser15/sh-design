"use strict";(self.webpackChunkproject_management_app=self.webpackChunkproject_management_app||[]).push([[112],{217:(e,s,t)=>{t.d(s,{n:()=>x});var a=t(4848),l=t(6540),r=t(2460),n=t(3492),i=t(339),c=t(82),d=t(4574),o=t(5919),m=t(2341);const x=({notes:e,onAddNote:s,onEditNote:t,onDeleteNote:x})=>{const[u,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(!0),[j,b]=(0,l.useState)(null),[y,v]=(0,l.useState)(""),f=()=>{j&&y.trim()&&(t(j,y.trim()),b(null),v(""))},N=()=>{b(null),v("")},w=[...e].sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime());return(0,a.jsxs)(m.Z,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Notes"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," notes"]})]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"is-internal",checked:p,onChange:e=>g(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"is-internal",className:"text-sm text-gray-700",children:"Internal note (only visible to team)"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:"Add a note about this project...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3}),(0,a.jsx)(o.$,{variant:"primary",size:"sm",icon:i.A,onClick:()=>{u.trim()&&(s(u.trim(),p),h(""))},disabled:!u.trim(),className:"self-start",children:"Add"})]})]}),w.length>0?(0,a.jsx)("div",{className:"space-y-4",children:w.map(e=>{return(0,a.jsx)("div",{className:"p-4 rounded-lg border-l-4 "+(e.isInternal?"bg-blue-50 border-blue-500":"bg-gray-50 border-gray-300"),children:j===e.id?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{value:y,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.$,{variant:"primary",size:"sm",onClick:f,disabled:!y.trim(),children:"Save"}),(0,a.jsx)(o.$,{variant:"secondary",size:"sm",onClick:N,children:"Cancel"})]})]}):(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900 mb-2",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(d.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e.author})]}),(0,a.jsx)("span",{children:(s=e.timestamp,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.isInternal&&(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:"Internal"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ml-4",children:[(0,a.jsx)(o.$,{variant:"ghost",size:"sm",icon:n.A,onClick:()=>(e=>{b(e.id),v(e.content)})(e),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)("span",{className:"sr-only",children:"Edit"})}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",icon:c.A,onClick:()=>x(e.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,a.jsx)("span",{className:"sr-only",children:"Delete"})})]})]})})},e.id);var s})}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(r.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"No notes added yet"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Add notes to track project updates and communication"})]})]})}},408:(e,s,t)=>{t.d(s,{UA:()=>n,jd:()=>l,pE:()=>r,xw:()=>a});const a=[{id:"win-001",windowName:"Main Office Window 1",filmType:"BR",length:120,width:80,layers:3,status:"Pending",assignedTeamMembers:[],installationBreakdown:[],createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z",projectId:"proj-001"},{id:"win-002",windowName:"Conference Room Window",filmType:"Riot+",length:200,width:100,layers:2,status:"In Progress",assignedTeamMembers:["tm-001","tm-002"],installationBreakdown:[{layerNumber:1,layerName:"Interior Layer",installerName:"John Smith",installerId:"tm-001",installedAt:"2024-01-16T09:00:00Z",status:"installed"}],createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-16T09:00:00Z",projectId:"proj-001"},{id:"win-003",windowName:"Reception Area Window",filmType:"Security",length:150,width:90,layers:1,status:"Complete",assignedTeamMembers:["tm-003"],installationBreakdown:[{layerNumber:1,layerName:"Security Film",installerName:"Mike Lee",installerId:"tm-003",installedAt:"2024-01-16T14:30:00Z",status:"installed"}],createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-16T14:30:00Z",projectId:"proj-001"},...Array.from({length:57},(e,s)=>{const t=s+4,a=["BR","Riot","Riot+","Security","Privacy","Decorative","Other"],l=["Pending","Updated","In Progress","Complete","Reinstallation Needed"],r=a[s%a.length],n=l[s%l.length],i=Math.floor(3*Math.random())+1,c="In Progress"===n||"Complete"===n?["tm-001","tm-002","tm-003","tm-004","tm-005"].slice(0,Math.floor(3*Math.random())+1):[],d="Complete"===n||"In Progress"===n?Array.from({length:i},(e,s)=>({layerNumber:s+1,layerName:`Layer ${s+1}`,installerName:`Installer ${String.fromCharCode(65+s)}`,installerId:`tm-${String(s+1).padStart(3,"0")}`,installedAt:new Date(Date.now()-7*Math.random()*24*60*60*1e3).toISOString(),status:Math.random()>.1?"installed":"reinstallation_needed"})):[];return{id:`win-${String(t).padStart(3,"0")}`,windowName:`Window ${t}`,filmType:r,length:Math.floor(200*Math.random())+80,width:Math.floor(120*Math.random())+60,layers:i,status:n,assignedTeamMembers:c,installationBreakdown:d,createdAt:new Date(Date.now()-30*Math.random()*24*60*60*1e3).toISOString(),updatedAt:new Date(Date.now()-7*Math.random()*24*60*60*1e3).toISOString(),projectId:"proj-001"}})],l=[{value:"BR",label:"BR"},{value:"Riot",label:"Riot"},{value:"Riot+",label:"Riot+"},{value:"Security",label:"Security"},{value:"Privacy",label:"Privacy"},{value:"Decorative",label:"Decorative"},{value:"Other",label:"Other"}],r={Pending:"bg-gray-100 text-gray-800",Updated:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800",Complete:"bg-green-100 text-green-800","Reinstallation Needed":"bg-red-100 text-red-800"},n={Pending:"Pending",Updated:"Updated","In Progress":"In Progress",Complete:"Complete","Reinstallation Needed":"Reinstallation Needed"}},1747:(e,s,t)=>{t.d(s,{b:()=>d});var a=t(4848),l=t(6540),r=t(9775),n=t(1085),i=t(894),c=t(5919);const d=({isOpen:e,onClose:s,onSave:t,onEdit:d,editingTravel:o,availableTeamMembers:m})=>{const[x,u]=(0,l.useState)({travelType:"Flight",departureLocation:"",destination:"",departureDate:"",returnDate:"",assignedTeamMembers:[]}),[h,p]=(0,l.useState)({}),g=!!o;(0,l.useEffect)(()=>{e&&(u(o?{travelType:o.travelType,departureLocation:o.departureLocation,destination:o.destination,departureDate:o.departureDate,returnDate:o.returnDate||"",assignedTeamMembers:o.assignedTeamMembers}:{travelType:"Flight",departureLocation:"",destination:"",departureDate:"",returnDate:"",assignedTeamMembers:[]}),p({}))},[e,o]);const j=(e,s)=>{u(t=>({...t,[e]:s})),h[e]&&p(s=>({...s,[e]:""}))},b=()=>m.filter(e=>x.assignedTeamMembers.includes(e.id));return(0,a.jsx)(i.a,{isOpen:e,onClose:s,title:g?"Edit Travel Plan":"Add Travel Plan",size:"lg",children:(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return x.departureLocation.trim()||(e.departureLocation="Departure location is required"),x.destination.trim()||(e.destination="Destination is required"),x.departureDate||(e.departureDate="Departure date is required"),0===x.assignedTeamMembers.length&&(e.assignedTeamMembers="At least one team member must be selected"),p(e),0===Object.keys(e).length})())return;const a={...x,returnDate:x.returnDate||void 0};g&&d?d(o.id,a):t(a),s()},className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel Type *"}),(0,a.jsxs)("select",{value:x.travelType,onChange:e=>j("travelType",e.target.value),className:"w-full px-3 py-2 pr-7 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"Flight",children:"Flight"}),(0,a.jsx)("option",{value:"Vehicle",children:"Vehicle"}),(0,a.jsx)("option",{value:"Train",children:"Train"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departure Location *"}),(0,a.jsx)("input",{type:"text",value:x.departureLocation,onChange:e=>j("departureLocation",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(h.departureLocation?"border-red-300":"border-gray-300"),placeholder:"Enter departure location"}),h.departureLocation&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:h.departureLocation})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination *"}),(0,a.jsx)("input",{type:"text",value:x.destination,onChange:e=>j("destination",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(h.destination?"border-red-300":"border-gray-300"),placeholder:"Enter destination"}),h.destination&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:h.destination})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departure Date *"}),(0,a.jsx)("input",{type:"date",value:x.departureDate,onChange:e=>j("departureDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(h.departureDate?"border-red-300":"border-gray-300")}),h.departureDate&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:h.departureDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Return Date (Optional)"}),(0,a.jsx)("input",{type:"date",value:x.returnDate,onChange:e=>j("returnDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Team Members *"}),b().length>0&&(0,a.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["Selected (",b().length,")"]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:b().map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[e.name," (",e.role,")"]},e.id))})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg",children:m.map(e=>(0,a.jsxs)("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:x.assignedTeamMembers.includes(e.id),onChange:()=>{return s=e.id,void u(e=>({...e,assignedTeamMembers:e.assignedTeamMembers.includes(s)?e.assignedTeamMembers.filter(e=>e!==s):[...e.assignedTeamMembers,s]}));var s},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.role})]})]},e.id))}),h.assignedTeamMembers&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:h.assignedTeamMembers})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)(c.$,{type:"button",variant:"secondary",onClick:s,children:"Cancel"}),(0,a.jsx)(c.$,{type:"submit",variant:"primary",icon:r.A,children:g?"Update Travel Plan":"Add Travel Plan"})]})]})})}},2321:(e,s,t)=>{t.d(s,{N:()=>a});const a=[{id:"tm-001",name:"John Smith",role:"Lead Supervisor",status:"Available",phone:"+1-555-0123",email:"john@company.com",avatar:"JS",location:"Los Angeles, CA",experience:8,specializations:["Security Film","Window Installation","Team Management"],projects:[{id:"proj-001",name:"Downtown Office Complex",stage:"Installation",timeline:"Mar 15 - Mar 25, 2024",assignedDate:"2024-03-01"},{id:"proj-002",name:"Residential Security Upgrade",stage:"Planning",timeline:"Apr 1 - Apr 15, 2024",assignedDate:"2024-03-10"}],activityLog:[{id:"act-001",type:"assignment",description:"Assigned to Downtown Office Complex",date:"2024-03-01",details:"Lead supervisor role for 10-day installation project"},{id:"act-002",type:"project_update",description:"Project status updated to Installation phase",date:"2024-03-05",details:"All planning completed, installation started"}]},{id:"tm-002",name:"Sarah Johnson",role:"Crew Leader",status:"Available",phone:"+1-555-0124",email:"sarah@company.com",avatar:"SJ",location:"Chicago, IL",experience:6,specializations:["Quality Control","Safety Protocols"],projects:[{id:"proj-003",name:"Midtown Retail Security",stage:"Quality Check",timeline:"Mar 20 - Mar 30, 2024",assignedDate:"2024-03-15"}],activityLog:[{id:"act-003",type:"assignment",description:"Assigned to Midtown Retail Security",date:"2024-03-15",details:"Crew leader for quality control phase"}]},{id:"tm-003",name:"Mike Wilson",role:"Installer",status:"Available",phone:"+1-555-0125",email:"mike@company.com",avatar:"MW",location:"Houston, TX",experience:4,specializations:["Precision Installation"],projects:[{id:"proj-001",name:"Downtown Office Complex",stage:"Installation",timeline:"Mar 15 - Mar 25, 2024",assignedDate:"2024-03-01"}],activityLog:[{id:"act-004",type:"assignment",description:"Assigned to Downtown Office Complex",date:"2024-03-01",details:"Installation team member"}]},{id:"tm-004",name:"Emily Davis",role:"Installer",status:"Unavailable",unavailableUntil:"10/03/2024",phone:"+1-555-0126",email:"emily@company.com",avatar:"ED",location:"Phoenix, AZ",experience:5,specializations:["Commercial Projects"],projects:[],activityLog:[{id:"act-005",type:"status_change",description:"Status changed to unavailable",date:"2024-03-01",details:"Personal leave until 10/03/2024"}]},{id:"tm-005",name:"David Brown",role:"Crew Leader",status:"Available",phone:"+1-555-0127",email:"david@company.com",avatar:"DB",location:"Miami, FL",experience:7,specializations:["Large Scale Projects","Equipment Management"],projects:[{id:"proj-004",name:"Industrial Complex Security",stage:"Planning",timeline:"Apr 1 - May 15, 2024",assignedDate:"2024-03-20"}],activityLog:[{id:"act-006",type:"assignment",description:"Assigned to Industrial Complex Security",date:"2024-03-20",details:"Crew leader for large-scale project"}]},{id:"tm-006",name:"Lisa Garcia",role:"Installer",status:"Available",phone:"+1-555-0128",email:"lisa@company.com",avatar:"LG",location:"Seattle, WA",experience:3,specializations:["Residential Projects"],projects:[{id:"proj-005",name:"Residential Security Upgrade",stage:"Installation",timeline:"Mar 18 - Mar 28, 2024",assignedDate:"2024-03-10"}],activityLog:[{id:"act-007",type:"assignment",description:"Assigned to Residential Security Upgrade",date:"2024-03-10",details:"Installation team member for residential project"}]},{id:"tm-007",name:"Robert Taylor",role:"Lead Supervisor",status:"Unavailable",unavailableUntil:"05/03/2024",phone:"+1-555-0129",email:"robert@company.com",avatar:"RT",location:"Denver, CO",experience:10,specializations:["Project Management","Client Relations"],projects:[],activityLog:[{id:"act-008",type:"status_change",description:"Status changed to unavailable",date:"2024-02-25",details:"Medical leave until 05/03/2024"}]},{id:"tm-008",name:"Jennifer White",role:"Project Coordinator",status:"Available",phone:"+1-555-0130",email:"jennifer@company.com",avatar:"JW",location:"Boston, MA",experience:2,specializations:["Project Coordination","Client Communication"],projects:[{id:"proj-001",name:"Downtown Office Complex",stage:"Installation",timeline:"Mar 15 - Mar 25, 2024",assignedDate:"2024-03-01"},{id:"proj-002",name:"Residential Security Upgrade",stage:"Planning",timeline:"Apr 1 - Apr 15, 2024",assignedDate:"2024-03-10"}],activityLog:[{id:"act-009",type:"assignment",description:"Assigned to Downtown Office Complex",date:"2024-03-01",details:"Project coordinator for installation phase"},{id:"act-010",type:"assignment",description:"Assigned to Residential Security Upgrade",date:"2024-03-10",details:"Project coordinator for planning phase"}]},{id:"tm-009",name:"David Martinez",role:"Installer",status:"Available",phone:"+1-555-0131",email:"david@company.com",avatar:"DM",location:"Miami, FL",experience:6,specializations:["Commercial Projects","Security Systems"],projects:[],activityLog:[]},{id:"tm-010",name:"Lisa Anderson",role:"Crew Leader",status:"Available",phone:"+1-555-0132",email:"lisa@company.com",avatar:"LA",location:"Seattle, WA",experience:8,specializations:["Team Management","Quality Control"],projects:[],activityLog:[]},{id:"tm-011",name:"James Brown",role:"Installer",status:"Unavailable",unavailableUntil:"15/03/2024",phone:"+1-555-0133",email:"james@company.com",avatar:"JB",location:"Denver, CO",experience:3,specializations:["Residential Projects"],projects:[],activityLog:[{id:"act-011",type:"status_change",description:"Status changed to unavailable",date:"2024-03-01",details:"Personal leave until 15/03/2024"}]},{id:"tm-012",name:"Maria Garcia",role:"Project Coordinator",status:"Available",phone:"+1-555-0134",email:"maria@company.com",avatar:"MG",location:"Austin, TX",experience:4,specializations:["Client Relations","Scheduling"],projects:[],activityLog:[]},{id:"tm-013",name:"Kevin Lee",role:"Installer",status:"Available",phone:"+1-555-0135",email:"kevin@company.com",avatar:"KL",location:"Portland, OR",experience:5,specializations:["Precision Installation","Troubleshooting"],projects:[],activityLog:[]},{id:"tm-014",name:"Sarah Thompson",role:"Lead Supervisor",status:"Available",phone:"+1-555-0136",email:"sarah@company.com",avatar:"ST",location:"Nashville, TN",experience:10,specializations:["Project Management","Team Leadership"],projects:[],activityLog:[]},{id:"tm-015",name:"Michael Davis",role:"Installer",status:"Unavailable",unavailableUntil:"20/03/2024",phone:"+1-555-0137",email:"michael@company.com",avatar:"MD",location:"Las Vegas, NV",experience:7,specializations:["Commercial Security","System Integration"],projects:[],activityLog:[{id:"act-012",type:"status_change",description:"Status changed to unavailable",date:"2024-03-05",details:"Training course until 20/03/2024"}]},{id:"tm-016",name:"Amanda Wilson",role:"Crew Leader",status:"Available",phone:"+1-555-0138",email:"amanda@company.com",avatar:"AW",location:"Phoenix, AZ",experience:6,specializations:["Quality Assurance","Safety Protocols"],projects:[],activityLog:[]},{id:"tm-017",name:"Christopher Taylor",role:"Installer",status:"Available",phone:"+1-555-0139",email:"christopher@company.com",avatar:"CT",location:"San Diego, CA",experience:4,specializations:["Residential Security","Customer Service"],projects:[],activityLog:[]},{id:"tm-018",name:"Jessica Miller",role:"Project Coordinator",status:"Available",phone:"+1-555-0140",email:"jessica@company.com",avatar:"JM",location:"Tampa, FL",experience:3,specializations:["Documentation","Client Communication"],projects:[],activityLog:[]},{id:"tm-019",name:"Daniel Rodriguez",role:"Installer",status:"Unavailable",unavailableUntil:"25/03/2024",phone:"+1-555-0141",email:"daniel@company.com",avatar:"DR",location:"Orlando, FL",experience:5,specializations:["Commercial Projects","System Maintenance"],projects:[],activityLog:[{id:"act-013",type:"status_change",description:"Status changed to unavailable",date:"2024-03-08",details:"Family emergency until 25/03/2024"}]},{id:"tm-020",name:"Rachel Green",role:"Lead Supervisor",status:"Available",phone:"+1-555-0142",email:"rachel@company.com",avatar:"RG",location:"Minneapolis, MN",experience:9,specializations:["Project Planning","Resource Management"],projects:[],activityLog:[]}]},2528:(e,s,t)=>{t.d(s,{y:()=>m});var a=t(4848),l=t(6540),r=t(7379),n=t(2761),i=t(82),c=t(1676),d=t(5919),o=t(2341);const m=({documents:e,onUploadDocument:s,onDeleteDocument:t,onDownloadDocument:m})=>{const[x,u]=(0,l.useState)(!1),h=(0,l.useRef)(null),p=[{value:"contract",label:"Contract"},{value:"site-map",label:"Site Map"},{value:"permit",label:"Permit"},{value:"technical",label:"Technical"},{value:"other",label:"Other"}],g=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},j=e=>{s(e,"other")};return(0,a.jsxs)(o.Z,{className:"p-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Documents"})}),(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors mb-6 "+(x?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragOver:e=>{e.preventDefault(),u(!0)},onDragLeave:e=>{e.preventDefault(),u(!1)},onDrop:e=>{e.preventDefault(),u(!1);const s=Array.from(e.dataTransfer.files);s.length>0&&j(s[0])},children:[(0,a.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Drag and drop files here, or"," ",(0,a.jsx)("button",{onClick:()=>h.current?.click(),className:"text-blue-600 hover:text-blue-700 font-medium",children:"browse"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supported formats: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG"}),(0,a.jsx)("input",{ref:h,type:"file",onChange:e=>{const s=e.target.files;s&&s.length>0&&j(s[0])},className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"})]}),e.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>{return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:(l=e.type,l.includes("pdf")?"📄":l.includes("image")?"🖼️":l.includes("word")||l.includes("document")?"📝":l.includes("excel")||l.includes("spreadsheet")?"📊":"📁")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:g(e.size)}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(s=e.uploadedAt,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["by ",e.uploadedBy]}),(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 rounded-full",children:p.find(s=>s.value===e.category)?.label})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.$,{variant:"ghost",size:"sm",icon:r.A,onClick:()=>m(e),className:"p-2",children:(0,a.jsx)("span",{className:"sr-only",children:"Download"})}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",icon:i.A,onClick:()=>t(e.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)("span",{className:"sr-only",children:"Delete"})})]})]},e.id);var s,l})}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(n.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"No documents uploaded yet"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Upload contracts, site maps, and other project files"})]})]})}},2845:(e,s,t)=>{t.d(s,{Qp:()=>r});var a=t(9803);const l=e=>({id:e.id,trailerName:e.trailerName,registrationNumber:e.registrationNumber,homeLocation:`${e.city}, ${e.state}`,currentLocation:`${e.city}, ${e.state}`,status:(e=>{switch(e){case"available":default:return"available";case"low":return"low_stock";case"unavailable":return"unavailable"}})(e.status),unavailableUntil:"unavailable"===e.status?new Date(Date.now()+6048e5).toISOString():void 0,capacity:1e3,currentLoad:0,lastMaintenance:e.updatedAt,nextMaintenance:new Date(new Date(e.updatedAt).getTime()+15552e6).toISOString(),assignedProject:null,inventory:{filmSheets:e.inventory.filmSheets.map(e=>({sheetType:e.sheetType,required:e.threshold,available:e.currentStock})),tools:e.inventory.tools.map(e=>({toolName:e.toolName,available:e.currentStock}))}}),r=()=>a.d.map(l)},4112:(e,s,t)=>{t.d(s,{ProjectDetailsPage:()=>ee});var a=t(4848),l=t(6540),r=t(7767),n=t(4976),i=t(5719),c=t(1085),d=t(7596),o=t(1813),m=t(9152),x=t(7894);const u={id:"proj-001",name:"Downtown Office Complex Security Film Installation",projectId:"VIN-2024-001",stage:"preparation",status:"PV90",description:"Comprehensive security film installation for the new downtown office complex",location:"123 Main Street, Downtown",startDate:"2024-02-01",endDate:"2024-02-15",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-01-20T00:00:00Z"},h={assignedTeam:null,assignedTrailer:null,logistics:{partner:"LogiCorp Solutions",eta:"2024-01-25T08:00:00Z",notes:"Equipment delivery scheduled for early morning",contactPerson:"Jane Doe",contactPhone:"+1-555-0199"},logisticsTravel:{logistics:[],travelPlans:[]},checklist:[{id:"check-1",label:"Team Assigned",completed:!1,required:!0},{id:"check-2",label:"Trailer Assigned",completed:!1,required:!0},{id:"check-3",label:"Logistics Confirmed",completed:!1,required:!0},{id:"check-4",label:"Travel Setup",completed:!1,required:!0}],documents:[{id:"doc-1",name:"Site Map - Floor Plan.pdf",type:"application/pdf",label:"site-map",size:2048576,url:"/documents/site-map.pdf",uploadedAt:"2024-01-15T09:00:00Z",uploadedBy:"John Admin",projectId:"proj-001",category:"site-map"},{id:"doc-2",name:"Installation Contract.pdf",type:"application/pdf",label:"contract",size:1536e3,url:"/documents/contract.pdf",uploadedAt:"2024-01-16T11:30:00Z",uploadedBy:"Sarah Manager",projectId:"proj-001",category:"contract"}],notes:[{id:"note-1",content:"Client requested additional security measures for the main entrance",author:"John Smith",timestamp:"2024-01-20T10:15:00Z",createdAt:"2024-01-20T10:15:00Z",updatedAt:"2024-01-20T10:15:00Z",projectId:"proj-001",isInternal:!0},{id:"note-2",content:"Site visit completed. All measurements confirmed.",author:"Sarah Johnson",timestamp:"2024-01-19T16:45:00Z",createdAt:"2024-01-19T16:45:00Z",updatedAt:"2024-01-19T16:45:00Z",projectId:"proj-001",isInternal:!1}]};var p=t(4722),g=t(5212),j=t(1747),b=t(2321),y=t(3588),v=t(799),f=t(1397),N=t(3573),w=t(1314),k=t(7487),C=t(904),S=t(5919),A=t(4138);const T=({project:e,checklist:s,onEdit:t,onEditDates:l,onToggleItem:r,onStageClick:n,onMarkForQF:c,onSignClientQualityCheck:d,selectedStage:o,isPreparationStage:x=!1,windowProgress:u,onMarkAllWindowsCompleted:h,completedStages:p=new Set})=>{const g=s.filter(e=>e.completed).length,j=s.length,b=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),T=[{id:"preparation",label:"Preparation",icon:y.A,completed:g===j},{id:"wip",label:"Work in Progress",icon:m.A,completed:p.has("wip")||"QF"===e.status||"Completed"===e.status},{id:"quality",label:"Quality Check",icon:v.A,completed:"Completed"===e.status},{id:"completed",label:"Completed",icon:i.A,completed:"Completed"===e.status}],D=(()=>{if(o)return o;switch(e.status){case"PV90":case"UB":default:return"preparation";case"WB":case"WIP":return"wip";case"Completed":return"completed"}})();return(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-8",children:(0,a.jsxs)("div",{className:"flex py-6 px-6",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900 truncate",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded-full flex-shrink-0",children:e.projectId}),(0,a.jsx)(A.W,{status:e.status,className:"px-2 py-1 text-xs font-medium rounded-full border bg-blue-100 text-blue-700 border-blue-200 flex-shrink-0"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"truncate",children:e.location})]}),(0,a.jsx)("span",{className:"mx-2 text-gray-400",children:"•"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(N.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[b(e.startDate)," – ",b(e.endDate)]})]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-3 line-clamp-1",children:e.description}),(0,a.jsx)("div",{className:"mb-3",children:"wip"===D?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Project Progress"}),(0,a.jsx)("span",{className:"text-xs font-medium text-blue-600 cursor-pointer hover:text-blue-700 transition-colors",onDoubleClick:h,title:"Double-click to mark all windows as completed",children:u?`${u.completed}/${u.total} windows completed`:"0/0 windows completed"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:u?`${u.percentage}%`:"0%"}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{children:"0%"}),(0,a.jsx)("span",{children:"100%"})]})]}):"quality"===D?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Project Progress"}),(0,a.jsx)("span",{className:"text-xs font-medium text-green-600",children:u?`${u.total}/${u.total} windows completed`:"0/0 windows completed"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:"100%"}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{children:"0%"}),(0,a.jsx)("span",{children:"100%"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Preparation Tasks"})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>r(e.id),className:"flex-shrink-0 mr-1.5 text-gray-400 hover:text-blue-600 transition-colors","aria-label":`Toggle ${e.label}`,children:e.completed?(0,a.jsx)(w.A,{className:"w-3 h-3 text-green-500"}):(0,a.jsx)(k.A,{className:"w-3 h-3"})}),(0,a.jsx)("span",{className:"text-xs font-medium "+(e.completed?"text-green-600":"text-gray-600"),children:e.label})]},e.id))})]})}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:"wip"===D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.$,{variant:"primary",size:"sm",icon:w.A,onClick:c,className:"text-xs px-3 py-1 h-7",children:"Mark for QF"}),(0,a.jsx)(S.$,{variant:"secondary",size:"sm",icon:C.A,onClick:t,className:"text-xs px-3 py-1 h-7",children:"Edit"})]}):"quality"===D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.$,{variant:"primary",size:"sm",icon:w.A,onClick:d,className:"text-xs px-3 py-1 h-7",children:"Sign Client Quality Check Form"}),(0,a.jsx)(S.$,{variant:"secondary",size:"sm",icon:C.A,onClick:t,className:"text-xs px-3 py-1 h-7",children:"Edit"})]}):(0,a.jsxs)(a.Fragment,{children:[x&&l&&(0,a.jsx)(S.$,{variant:"secondary",size:"sm",icon:N.A,onClick:l,className:"text-xs px-3 py-1 h-7",children:"Edit Dates"}),(0,a.jsx)(S.$,{variant:"secondary",size:"sm",icon:C.A,onClick:t,className:"text-xs px-3 py-1 h-7",children:"Edit"})]})})]}),(0,a.jsx)("div",{className:"flex-shrink-0",style:{width:"360px"},children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 w-0.5 h-full bg-gray-200"}),(0,a.jsx)("div",{className:"relative pl-4",children:T.map((e,s)=>{e.icon;const t=e.id===D,l=e.completed,r=(e.id,!!n);return(0,a.jsxs)("div",{className:"flex items-center mb-3 last:mb-0 "+(r?"cursor-pointer hover:bg-gray-50 rounded-lg p-2 -m-2":""),onClick:r?()=>n?.(e.id):void 0,children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-2 flex-shrink-0 "+(l?"bg-green-500 border-green-500 text-white":t?"bg-blue-500 border-blue-500 text-white":r?"bg-white border-blue-300 text-blue-600 hover:border-blue-400":"bg-white border-gray-300 text-gray-500"),children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:l?(0,a.jsx)(w.A,{className:"w-4 h-4"}):s+1})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-bold "+(l?"text-green-600":t?"text-blue-600":r?"text-blue-600 hover:text-blue-700":"text-gray-600"),children:e.label}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:["preparation"===e.id&&"Complete all preparation tasks","wip"===e.id&&"Begin project execution and installation","quality"===e.id&&"Review and verify installation quality","completed"===e.id&&"Project successfully completed"]})]})]},e.id)})})]})})]})})};var D=t(6642),M=t(2341),P=t(1523),O=t(5279);const I=({title:e,description:s,icon:t,stageName:l})=>(0,a.jsxs)(M.Z,{className:"p-6 flex flex-col items-center justify-center text-center min-h-[300px]",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6 max-w-sm",children:s}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,a.jsx)(P.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Coming Soon in ",l]}),(0,a.jsx)(O.A,{className:"w-4 h-4"})]})]});var R=t(2528),L=t(217),U=t(9809),q=t(3729),$=t(5732),F=t(9237),B=t(894);const E=({isOpen:e,onClose:s,onAssignTrailer:t,availableTrailers:r,assignedTrailerId:n})=>{const[i,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[x,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(n||null),g=(0,l.useMemo)(()=>{const e=r.map(e=>e.currentLocation);return[...new Set(e)].sort()},[r]),j=(0,l.useMemo)(()=>r.filter(e=>{const s=e.trailerName.toLowerCase().includes(i.toLowerCase())||e.registrationNumber.toLowerCase().includes(i.toLowerCase())||e.currentLocation.toLowerCase().includes(i.toLowerCase()),t=!o||e.status===o,a=!x||e.currentLocation===x;return s&&t&&a}),[r,i,o,x]),b=()=>{s(),c(""),m(""),p(n||null)};return(0,a.jsx)(B.a,{isOpen:e,onClose:b,title:"Assign Trailer to Project",size:"lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-center space-y-3 lg:space-y-0 lg:space-x-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)(v.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by trailer name, registration, or location...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>c(e.target.value)}),i&&(0,a.jsx)("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(F.A,{size:16})})]}),(0,a.jsxs)("select",{className:"w-full lg:w-auto px-3 py-2 pr-7 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",value:o,onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"available",children:"Available"}),(0,a.jsx)("option",{value:"low_stock",children:"Low Stock"}),(0,a.jsx)("option",{value:"unavailable",children:"Unavailable"})]}),(0,a.jsxs)("select",{className:"w-full lg:w-auto px-3 py-2 pr-7 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",value:x,onChange:e=>u(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"All Locations"}),g.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===j.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"No trailers found matching your criteria."})]}):(0,a.jsx)("div",{className:"space-y-3",children:j.map(e=>{const s=(e=>"available"===e.status)(e),t=h===e.id;return(e=>{e.inventory.filmSheets.reduce((e,s)=>e+s.currentStock,0),e.inventory.tools.filter(e=>"good"===e.status).length,e.inventory.tools.length})(e),(0,a.jsx)("div",{className:"relative p-4 rounded-lg border-2 transition-all duration-200 "+(s?t?"border-blue-500 bg-blue-50 shadow-md cursor-pointer":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm cursor-pointer":"border-gray-200 bg-gray-50 cursor-not-allowed opacity-60"),onClick:()=>{return s&&(t=e.id,void p(t));var t},children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 pt-1",children:s?t?(0,a.jsx)("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(q.A,{className:"w-3 h-3 text-white"})}):(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"}):(0,a.jsx)("div",{className:"w-5 h-5 bg-gray-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(F.A,{className:"w-3 h-3 text-gray-500"})})}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-blue-600"})})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-base font-semibold mb-1 "+(s?"text-gray-900":"text-gray-500"),children:e.trailerName}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("p",{className:"text-sm "+(s?"text-gray-600":"text-gray-400"),children:e.registrationNumber}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.currentLocation})]})]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 ml-4 flex flex-col items-end",children:"available"===e.status?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(q.A,{className:"w-3 h-3 mr-1"}),"Available"]}):"low_stock"===e.status?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,a.jsx)($.A,{className:"w-3 h-3 mr-1"}),"Low Stock"]}):(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,a.jsx)(F.A,{className:"w-3 h-3 mr-1"}),"Unavailable"]}),(0,a.jsxs)("span",{className:"text-xs text-red-600 mt-1",children:["until ",e.unavailableUntil?new Date(e.unavailableUntil).toLocaleDateString():"TBD"]})]})})]})})]})},e.id)})})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsx)(S.$,{variant:"secondary",onClick:b,children:"Cancel"}),(0,a.jsx)(S.$,{variant:"primary",onClick:()=>{const e=r.find(e=>e.id===h);e&&(t(e),s())},disabled:!h,children:n?"Update Trailer":"Assign Trailer"})]})]})})};var z=t(7235),W=t(2845),Z=t(408),Q=t(8093);const V=({data:e})=>(0,a.jsxs)(M.Z,{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Progress"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:(new Date).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 mx-auto mb-1.5 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(Q.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900",children:e.windowsStarted}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Windows Started"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 mx-auto mb-1.5 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(w.A,{className:"w-5 h-5 text-green-600"})}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900",children:e.windowsCompleted}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Windows Completed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 mx-auto mb-1.5 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)($.A,{className:"w-5 h-5 text-red-600"})}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900",children:e.issuesReported}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Issues Reported"})]})]})]});var J=t(4574);const _=({teamMembers:e})=>(0,a.jsxs)(M.Z,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Crew Performance"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," members"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.avatar?(0,a.jsx)("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full object-cover"}):(0,a.jsx)(J.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,a.jsx)(w.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:e.done})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Done"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-blue-600",children:[(0,a.jsx)(P.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:e.active})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Active"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-red-600",children:[(0,a.jsx)($.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:e.issues})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Issues"})]})]})]},e.id))})]});var G=t(3459),H=t(6085),X=t(2178),K=t(339);const Y=({isOpen:e,onClose:s,onSave:t,projectName:r})=>{const[n,i]=(0,l.useState)({clientName:"",workCompleted:!0,teamSignOff:!0,invoiceSent:!1,clientSatisfied:!1,additionalNotes:"",hasAdditionalNotes:!1}),[c,d]=(0,l.useState)(!1),o=(e,s)=>{i(t=>({...t,[e]:s}))};return(0,a.jsx)(B.a,{isOpen:e,onClose:s,title:"Quality Assurance Form",size:"lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:["Project: ",r]}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Please review and confirm the following items before signing off on this project."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Quality Assurance Checklist"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"All work has been completed according to specifications"})}),(0,a.jsx)("input",{type:"checkbox",checked:n.workCompleted,onChange:e=>o("workCompleted",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(G.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Team has officially signed off on project completion"})}),(0,a.jsx)("input",{type:"checkbox",checked:n.teamSignOff,onChange:e=>o("teamSignOff",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(H.A,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Invoice has been sent to client for billing"})}),(0,a.jsx)("input",{type:"checkbox",checked:n.invoiceSent,onChange:e=>o("invoiceSent",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(X.A,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Client is satisfied with the completed work"})}),(0,a.jsx)("input",{type:"checkbox",checked:n.clientSatisfied,onChange:e=>o("clientSatisfied",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]})]}),c?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Additional Notes"}),(0,a.jsx)(S.$,{variant:"ghost",size:"sm",icon:F.A,onClick:()=>{d(!1),i(e=>({...e,hasAdditionalNotes:!1,additionalNotes:""}))},className:"text-gray-500 hover:text-gray-700",children:"Remove"})]}),(0,a.jsx)("textarea",{value:n.additionalNotes,onChange:e=>o("additionalNotes",e.target.value),placeholder:"Add any additional notes, feedback, or special considerations for this project...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:4})]}):(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(S.$,{variant:"outline",size:"sm",icon:K.A,onClick:()=>{d(!0),i(e=>({...e,hasAdditionalNotes:!0}))},className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Add Additional Notes"})}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Client Signature"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type your name to sign this form"}),(0,a.jsx)("input",{type:"text",value:n.clientName,onChange:e=>o("clientName",e.target.value),placeholder:"Enter your full name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"By typing your name above, you are electronically signing this Quality Assurance form and confirming all items listed above."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(S.$,{variant:"secondary",onClick:s,className:"px-6",children:"Cancel"}),(0,a.jsx)(S.$,{variant:"primary",onClick:()=>{n.clientName.trim()?(t(n),s()):alert("Please enter your name to sign the form")},icon:w.A,className:"px-6",children:"Save & Complete Project"})]})]})})},ee=()=>{const{projectId:e}=(0,r.g)(),{setBreadcrumbs:s}=(0,x.iQ)(),{showToast:t}=(0,z.d)(),y=(0,r.Zp)(),[v]=(0,n.ok)(),f=v.get("stage"),[N,w]=(0,l.useState)(u),[k,C]=(0,l.useState)(h),[S,A]=(0,l.useState)(!1),[M,P]=(0,l.useState)(!1),[O,q]=(0,l.useState)(!1),[$,F]=(0,l.useState)(!1),[Q,J]=(0,l.useState)(!1),[G,H]=(0,l.useState)(null),[X,K]=(0,l.useState)(!1),[ee,se]=(0,l.useState)(!1),[te,ae]=(0,l.useState)(null),[le,re]=(0,l.useState)(!1),[ne,ie]=(0,l.useState)(null),[ce,de]=(0,l.useState)(!1),[oe]=(0,l.useState)((0,W.Qp)()),[me,xe]=(0,l.useState)(f||"preparation"),[ue,he]=(0,l.useState)(Z.xw),[pe,ge]=(0,l.useState)(new Set),[je,be]=(0,l.useState)(!1),[ye,ve]=(0,l.useState)("");(0,l.useEffect)(()=>{s([{label:"Dashboard",href:"/dashboard"},{label:"Projects",href:"/projects"},{label:"Project Details",href:`/projects/${e}`}])},[N.name,e]);const fe=()=>{P(!0)},Ne=()=>{q(!0)},we=e=>{if(k.assignedTeam){const s=k.assignedTeam.members.filter(s=>s.id!==e),t={...k.assignedTeam,members:s,count:s.length,leadMember:s.find(e=>"Lead Supervisor"===e.role)||void 0};C(e=>({...e,assignedTeam:s.length>0?t:null}))}},ke=e=>{const s={members:e.map(e=>({...e,assignedAt:(new Date).toISOString(),assignedBy:"Current User"})),count:e.length,leadMember:e.find(e=>"Lead Supervisor"===e.role)||void 0};C(e=>({...e,assignedTeam:s,checklist:e.checklist.map(e=>"Team Assigned"===e.label?{...e,completed:!0,completedAt:(new Date).toISOString(),completedBy:"Current User"}:e)}))},Ce=()=>{console.log("View team details"),alert("View Team Details - Coming Soon")},Se=()=>{C(e=>({...e,checklist:e.checklist.map(e=>"Travel Setup"===e.label?{...e,completed:!0,completedAt:(new Date).toISOString(),completedBy:"Current User"}:e)}))},Ae=e=>{const s={...e,id:`log-${Date.now()}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Current User"};C(e=>({...e,logisticsTravel:{...e.logisticsTravel,logistics:[...e.logisticsTravel.logistics,s]},checklist:e.checklist.map(e=>"Logistics Confirmed"===e.label?{...e,completed:!0,completedAt:(new Date).toISOString(),completedBy:"Current User"}:e)}))},Te=()=>{ae(null),K(!0)},De=e=>{ae(e),se(!0)},Me=e=>{const s={...e,id:`travel-${Date.now()}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Current User"};C(e=>({...e,logisticsTravel:{...e.logisticsTravel,travelPlans:[...e.logisticsTravel.travelPlans,s]},checklist:e.checklist.map(e=>"Travel Setup"===e.label?{...e,completed:!0,completedAt:(new Date).toISOString(),completedBy:"Current User"}:e)}))},Pe=e=>{C(s=>({...s,logisticsTravel:{...s.logisticsTravel,travelPlans:s.logisticsTravel.travelPlans.filter(s=>s.id!==e)}}))},Oe=()=>{de(!0)},Ie=e=>{console.log("Notifying house manager:",e),t(e)},Re=e=>{console.log("Uploading shipment receipt:",e.name)},Le=e=>{console.log("Removing receipt:",e)},Ue=()=>{console.log("Marking inventory as completed")};(0,l.useEffect)(()=>{const e=ue.filter(e=>"Complete"===e.status).length,s=ue.length;e===s&&s>0&&"WIP"===N.status&&(ge(e=>new Set([...e,"wip"])),t("All windows completed! WIP stage marked as complete."))},[ue,N.status,t]);const qe=(e,s)=>{C(a=>{const l=a.checklist.map(t=>{if(t.label===e){const e={...t,completed:s};return s?(e.completedAt=(new Date).toISOString(),e.completedBy="Current User"):(e.completedAt=void 0,e.completedBy=void 0),e}return t});if(l.every(e=>e.completed)&&"PV90"===N.status){const e={...N,status:"WB"};return t("All preparation tasks completed! Project status updated to WB. Work in Progress stage is now available."),{...a,checklist:l,project:e}}return{...a,checklist:l}})},$e=[{sheetType:"BR",required:30,available:0,status:"missing"},{sheetType:"Riot+",required:25,available:0,status:"missing"},{sheetType:"Riot",required:20,available:0,status:"missing"},{sheetType:"Riot -",required:15,available:0,status:"missing"},{sheetType:"FER",required:12,available:0,status:"missing"},{sheetType:"Smash",required:10,available:0,status:"missing"},{sheetType:"Tint NI",required:8,available:0,status:"missing"},{sheetType:"Tint Incl",required:6,available:0,status:"missing"},{sheetType:"Anchoring",required:5,available:0,status:"missing"},{sheetType:"Kevlar",required:3,available:0,status:"missing"},{sheetType:"Stripping",required:2,available:0,status:"missing"}],Fe="preparation"===N.stage||"PV90"===N.status||"UB"===N.status||"WB"===N.status;return(0,l.useEffect)(()=>{if(f){let e;switch(xe(f),f){case"preparation":default:e="PV90";break;case"wip":e="WIP";break;case"quality":e="QF";break;case"completed":e="Completed"}w(s=>({...s,status:e})),"wip"===f?(C(e=>({...e,checklist:e.checklist.map(e=>({...e,completed:!0}))})),t("Work in Progress stage - Preparation tasks marked as completed")):"quality"===f?t("Quality Check stage opened"):"completed"===f&&t("Completed stage opened")}else{let e="preparation";switch(N.status){case"PV90":case"UB":case"WB":default:e="preparation";break;case"WIP":e="wip";break;case"QF":e="quality";break;case"Completed":e="completed"}xe(e)}},[f,N.status]),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"w-full px-4 py-6",children:[(0,a.jsx)(T,{project:N,checklist:k.checklist,onEdit:()=>{A(!0)},onEditDates:()=>{re(!0)},onToggleItem:e=>{C(s=>({...s,checklist:s.checklist.map(s=>{if(s.id===e){const e={...s,completed:!s.completed};return e.completed?(e.completedAt=(new Date).toISOString(),e.completedBy="Current User"):(e.completedAt=void 0,e.completedBy=void 0),e}return s})}))},onStageClick:e=>{switch(xe(e),e){case"preparation":t("Switched to Preparation stage");break;case"wip":const e={...N,status:"WIP"};C(s=>({...s,project:e})),t("Switched to Work in Progress stage - Project status updated to WIP");break;case"quality":t("Switched to Quality Check stage");break;case"completed":t("Switched to Completed stage")}},onMarkForQF:()=>{const s=ue.map(e=>({...e,status:"Complete",updatedAt:(new Date).toISOString(),installationBreakdown:e.installationBreakdown.length>0?e.installationBreakdown:Array.from({length:e.layers},(e,s)=>({layerNumber:s+1,layerName:`Layer ${s+1}`,installerName:"System Auto-Complete",installerId:"system",installedAt:(new Date).toISOString(),status:"installed"}))}));he(s),ge(e=>new Set([...e,"wip"])),w(e=>({...e,status:"QF",updatedAt:(new Date).toISOString()})),y(`/projects/${e}?stage=quality`),t("Project marked for Quality Check. All windows completed and moved to Quality Check stage.")},onSignClientQualityCheck:()=>{be(!0)},selectedStage:me,isPreparationStage:Fe,windowProgress:(()=>{const e=ue.filter(e=>"Complete"===e.status).length,s=ue.length;return{completed:e,total:s,percentage:s>0?Math.round(e/s*100):0}})(),onMarkAllWindowsCompleted:()=>{const e=ue.map(e=>({...e,status:"Complete",updatedAt:(new Date).toISOString(),installationBreakdown:e.installationBreakdown.length>0?e.installationBreakdown:Array.from({length:e.layers},(e,s)=>({layerNumber:s+1,layerName:`Layer ${s+1}`,installerName:"System Auto-Complete",installerId:"system",installedAt:(new Date).toISOString(),status:"installed"}))}));he(e),ge(e=>new Set([...e,"wip"])),t("All windows completed! WIP stage marked as complete.")},completedStages:pe}),"preparation"===me?(0,a.jsx)(D.X,{assignedTeam:k.assignedTeam,travelPlans:k.logisticsTravel.travelPlans,assignedTrailer:ne,projectFilmRequirements:$e,onViewTeam:Ce,onAssignTeam:fe,onEditTeam:Ne,onRemoveTeamMember:we,onSetupTravel:Se,onAddTravel:Te,onEditTravel:De,onDeleteTravel:Pe,onAssignTrailer:Oe,onNotifyHouseManager:Ie,onUploadReceipt:Re,onRemoveReceipt:Le,onMarkCompleted:Ue,onUpdatePreparationTask:qe,selectedStage:me}):"wip"===me?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.X,{assignedTeam:k.assignedTeam,travelPlans:k.logisticsTravel.travelPlans,assignedTrailer:ne,projectFilmRequirements:$e,onViewTeam:Ce,onAssignTeam:fe,onEditTeam:Ne,onRemoveTeamMember:we,onSetupTravel:Se,onAddTravel:Te,onEditTravel:De,onDeleteTravel:Pe,onAssignTrailer:Oe,onNotifyHouseManager:Ie,onUploadReceipt:Re,onRemoveReceipt:Le,onMarkCompleted:Ue,onUpdatePreparationTask:qe,selectedStage:me,windows:ue,onWindowUpdate:e=>{he(s=>s.map(s=>s.id===e.id?e:s))}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsx)(V,{data:{windowsStarted:8,windowsCompleted:5,issuesReported:2}}),(0,a.jsx)(_,{teamMembers:[{id:"tm-001",name:"John Smith",role:"Installer",done:12,active:3,issues:1},{id:"tm-002",name:"Sarah Johnson",role:"Installer",done:15,active:2,issues:0},{id:"tm-003",name:"Mike Davis",role:"Installer",done:8,active:4,issues:2}]})]})]}):"quality"===me?null:"completed"===me?(0,a.jsxs)(a.Fragment,{children:[ye&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality Assurance Notes"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Additional notes from the quality assurance form"})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:ye})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Completed Successfully"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"All stages have been completed and quality assured"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"100%"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Windows Completed"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"4/4"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Stages Completed"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"✓"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Quality Assured"})]})]})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(I,{title:"Team Management",description:"Manage team assignments, track progress, and coordinate team activities during project execution.",icon:(0,a.jsx)(c.A,{className:"w-8 h-8 text-blue-600"}),stageName:"Work in Progress"}),(0,a.jsx)(I,{title:"Equipment & Resources",description:"Track equipment usage, manage resources, and monitor inventory during project execution.",icon:(0,a.jsx)(d.A,{className:"w-8 h-8 text-amber-600"}),stageName:"Work in Progress"}),(0,a.jsx)(I,{title:"Project Logistics",description:"Monitor project logistics, track deliveries, and manage supply chain during execution.",icon:(0,a.jsx)(o.A,{className:"w-8 h-8 text-purple-600"}),stageName:"Work in Progress"}),(0,a.jsx)(I,{title:"Progress Tracking",description:"Track project milestones, monitor progress, and manage timelines during execution.",icon:(0,a.jsx)(m.A,{className:"w-8 h-8 text-green-600"}),stageName:"Work in Progress"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(R.y,{documents:k.documents,onUploadDocument:(s,t)=>{const a={id:`doc-${Date.now()}`,name:s.name,type:s.type,label:t,size:s.size,url:URL.createObjectURL(s),uploadedAt:(new Date).toISOString(),uploadedBy:"Current User",projectId:e||"",category:t};C(e=>({...e,documents:[...e.documents,a]}))},onDeleteDocument:e=>{C(s=>({...s,documents:s.documents.filter(s=>s.id!==e)}))},onDownloadDocument:e=>{console.log("Downloading document:",e.name),alert(`Downloading ${e.name}`)}}),(0,a.jsx)(L.n,{notes:k.notes,onAddNote:(s,t)=>{const a={id:`note-${Date.now()}`,content:s,author:"Current User",timestamp:(new Date).toISOString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),projectId:e||"",isInternal:t};C(e=>({...e,notes:[...e.notes,a]}))},onEditNote:(e,s)=>{C(t=>({...t,notes:t.notes.map(t=>t.id===e?{...t,content:s,updatedAt:(new Date).toISOString()}:t)}))},onDeleteNote:e=>{C(s=>({...s,notes:s.notes.filter(s=>s.id!==e)}))}})]}),(0,a.jsx)(B.a,{isOpen:S,onClose:()=>A(!1),title:"Edit Project",size:"md",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Project editing functionality will be implemented in the next phase."}),(0,a.jsx)("div",{className:"flex justify-end space-x-3",children:(0,a.jsx)("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}),(0,a.jsx)(p.W,{isOpen:M,onClose:()=>P(!1),onAssignTeam:ke,availableMembers:b.N,projectDetails:N}),(0,a.jsx)(p.W,{isOpen:O,onClose:()=>q(!1),onAssignTeam:ke,availableMembers:b.N,assignedMemberIds:k.assignedTeam?.members.map(e=>e.id)||[],projectDetails:N}),(0,a.jsx)(g.C,{isOpen:$,onClose:()=>F(!1),onSave:Ae}),(0,a.jsx)(g.C,{isOpen:Q,onClose:()=>J(!1),onSave:Ae,onEdit:(e,s)=>{C(t=>({...t,logisticsTravel:{...t.logisticsTravel,logistics:t.logisticsTravel.logistics.map(t=>t.id===e?{...t,...s,updatedAt:(new Date).toISOString()}:t)}}))},editingLogistics:G}),(0,a.jsx)(j.b,{isOpen:X,onClose:()=>K(!1),onSave:Me,availableTeamMembers:b.N.map(e=>({id:e.id,name:e.name,role:e.role}))}),(0,a.jsx)(j.b,{isOpen:ee,onClose:()=>se(!1),onSave:Me,onEdit:(e,s)=>{C(t=>({...t,logisticsTravel:{...t.logisticsTravel,travelPlans:t.logisticsTravel.travelPlans.map(t=>t.id===e?{...t,...s,updatedAt:(new Date).toISOString()}:t)}}))},editingTravel:te,availableTeamMembers:b.N.map(e=>({id:e.id,name:e.name,role:e.role}))}),(0,a.jsx)(U.r,{isOpen:le,onClose:()=>re(!1),onConfirm:(e,s)=>{console.log("Updating project dates:",{startDate:e,endDate:s}),re(!1)},projectTitle:N.name,projectStatus:N.status,initialStartDate:N.startDate,initialEndDate:N.endDate}),(0,a.jsx)(E,{isOpen:ce,onClose:()=>de(!1),onAssignTrailer:e=>{ie(e),C(e=>({...e,checklist:e.checklist.map(e=>"Trailer Assigned"===e.label?{...e,completed:!0}:e)})),de(!1)},availableTrailers:oe,assignedTrailerId:ne?.id}),(0,a.jsx)(Y,{isOpen:je,onClose:()=>be(!1),onSave:s=>{w(e=>({...e,status:"Completed",updatedAt:(new Date).toISOString()})),ge(e=>new Set([...e,"quality"])),s.hasAdditionalNotes&&s.additionalNotes.trim()&&ve(s.additionalNotes),y(`/projects/${e}?stage=completed`),t(`Quality Assurance Form signed by ${s.clientName}! Project marked as completed.`)},projectName:N.name})]})})}},4722:(e,s,t)=>{t.d(s,{W:()=>u});var a=t(4848),l=t(6540),r=t(3573),n=t(1397),i=t(2053),c=t(799),d=t(4574),o=t(9237),m=t(5919),x=t(894);const u=({isOpen:e,onClose:s,onAssignTeam:t,availableMembers:u,assignedMemberIds:h=[],projectDetails:p})=>{const[g,j]=(0,l.useState)(""),[b,y]=(0,l.useState)(""),[v,f]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[k,C]=(0,l.useState)(h),[S,A]=(0,l.useState)(1),T=15,D=(0,l.useMemo)(()=>u.map(e=>e.location).filter((e,s,t)=>t.indexOf(e)===s&&e).sort(),[u]),M=(0,l.useMemo)(()=>u.filter(e=>{const s=e.name.toLowerCase().includes(g.toLowerCase())||e.role.toLowerCase().includes(g.toLowerCase())||e.phone?.toLowerCase().includes(g.toLowerCase()),t=!b||e.role===b,a=!v||e.status===v,l=!N||e.location===N;return s&&t&&a&&l}),[u,g,b,v,N]),P=Math.ceil(M.length/T),O=(0,l.useMemo)(()=>{const e=(S-1)*T;return M.slice(e,e+T)},[M,S,T]),I=e=>{const s=u.find(s=>s.id===e);s&&"Available"===s.status&&C(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},R=e=>new Date(e).toLocaleDateString("en-GB"),L=k.length,U=M.length,q=u.filter(e=>k.includes(e.id));return(0,a.jsx)(x.a,{isOpen:e,onClose:s,title:"Assign Team Members",size:"xl",children:(0,a.jsxs)("div",{className:"p-6 max-h-[80vh] flex flex-col",children:[p&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-900",children:"Project Duration"}),(0,a.jsxs)("span",{className:"text-sm text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:R(p.startDate)}),(0,a.jsx)("span",{className:"mx-2",children:"→"}),(0,a.jsx)("span",{className:"font-medium",children:R(p.endDate)})]})]})}),(0,a.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, phone, or role...",value:g,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"px-3 py-2 pr-7 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[120px]",children:[(0,a.jsx)("option",{value:"",children:"All Roles"}),(0,a.jsx)("option",{value:"Lead Supervisor",children:"Lead Supervisor"}),(0,a.jsx)("option",{value:"Crew Leader",children:"Crew Leader"}),(0,a.jsx)("option",{value:"Installer",children:"Installer"}),(0,a.jsx)("option",{value:"Project Coordinator",children:"Project Coordinator"})]}),(0,a.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"px-3 py-2 pr-7 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[120px]",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"Available",children:"Available"}),(0,a.jsx)("option",{value:"Unavailable",children:"Unavailable"})]}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-3 py-2 pr-7 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[120px]",children:[(0,a.jsx)("option",{value:"",children:"All Locations"}),D.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),L>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Selected Team Members (",L,")"]})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:q.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-100 border border-gray-300 rounded-full px-2 py-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.name}),(0,a.jsx)("button",{onClick:()=>{return s=e.id,void C(e=>e.filter(e=>e!==s));var s},className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(o.A,{className:"w-3 h-3"})})]},e.id))})]}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[U," members found"]})}),(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden flex-1",children:(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200 sticky top-0",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"Select"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(e=>{const s="Unavailable"===e.status,t=k.includes(e.id);return(0,a.jsxs)("tr",{className:`${s?"bg-gray-50 opacity-60":"hover:bg-gray-50 cursor-pointer"} ${t?"bg-blue-50":""}`,onClick:()=>!s&&I(e.id),title:s?`Unavailable until ${e.unavailableUntil?R(e.unavailableUntil):"TBD"} — cannot assign.`:"",children:[(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("input",{type:"checkbox",checked:t,disabled:s,onChange:()=>!s&&I(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50"})})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-7 h-7 bg-gray-300 rounded-full flex items-center justify-center mr-2",children:e.avatar?(0,a.jsx)("img",{src:e.avatar,alt:e.name,className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:(l=e.name,l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.role})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-900 whitespace-nowrap",children:[(0,a.jsx)(i.A,{className:"w-3 h-3 mr-1 text-gray-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.phone||"—"})]})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium "+("Available"===e.status?"text-green-600":"text-red-600"),children:e.status}),"Unavailable"===e.status&&e.unavailableUntil&&(0,a.jsxs)("span",{className:"text-xs text-red-500 whitespace-nowrap",children:["until ",R(e.unavailableUntil)]})]})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-900 whitespace-nowrap",children:[(0,a.jsx)(n.A,{className:"w-3 h-3 mr-1 text-gray-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.location||"—"})]})})]},e.id);var l})})]})})}),P>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(S-1)*T+1," to ",Math.min(S*T,U)," of ",U," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>A(e=>Math.max(e-1,1)),disabled:1===S,children:"Previous"}),(0,a.jsxs)("span",{className:"px-3 py-1 text-sm text-gray-600",children:[S," of ",P]}),(0,a.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>A(e=>Math.min(e+1,P)),disabled:S===P,children:"Next"})]})]}),0===M.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No team members available"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Please adjust filters or check back later."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsx)(m.$,{variant:"secondary",onClick:s,children:"Cancel"}),(0,a.jsxs)(m.$,{variant:"primary",onClick:()=>{const e=u.filter(e=>k.includes(e.id));t(e),s()},disabled:0===L,children:["Add Team Members (",L,")"]})]})]})})}},5212:(e,s,t)=>{t.d(s,{C:()=>c});var a=t(4848),l=t(6540),r=t(1813),n=t(894),i=t(5919);const c=({isOpen:e,onClose:s,onSave:t,onEdit:c,editingLogistics:d})=>{const[o,m]=(0,l.useState)({name:"",type:"Material",description:"",quantity:1,location:"",expectedDate:""}),[x,u]=(0,l.useState)({}),h=!!d;(0,l.useEffect)(()=>{e&&(m(d?{name:d.name,type:d.type,description:d.description,quantity:d.quantity,location:d.location,expectedDate:d.expectedDate}:{name:"",type:"Material",description:"",quantity:1,location:"",expectedDate:""}),u({}))},[e,d]);const p=(e,s)=>{m(t=>({...t,[e]:s})),x[e]&&u(s=>({...s,[e]:""}))};return(0,a.jsx)(n.a,{isOpen:e,onClose:s,title:h?"Edit Logistics":"Add Logistics",size:"md",children:(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return o.name.trim()||(e.name="Logistics name is required"),o.description.trim()||(e.description="Description is required"),o.quantity<=0&&(e.quantity="Quantity must be greater than 0"),o.location.trim()||(e.location="Location is required"),o.expectedDate||(e.expectedDate="Expected date is required"),u(e),0===Object.keys(e).length})())return;const a={...o,quantity:Number(o.quantity)};h&&c?c(d.id,a):t(a),s()},className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logistics Name *"}),(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>p("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(x.name?"border-red-300":"border-gray-300"),placeholder:"Enter logistics name"}),x.name&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:x.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,a.jsxs)("select",{value:o.type,onChange:e=>p("type",e.target.value),className:"w-full px-3 py-2 pr-7 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"Material",children:"Material"}),(0,a.jsx)("option",{value:"Equipment",children:"Equipment"}),(0,a.jsx)("option",{value:"Vehicle",children:"Vehicle"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,a.jsx)("textarea",{value:o.description,onChange:e=>p("description",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(x.description?"border-red-300":"border-gray-300"),placeholder:"Enter description"}),x.description&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:x.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),(0,a.jsx)("input",{type:"number",min:"1",value:o.quantity,onChange:e=>p("quantity",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(x.quantity?"border-red-300":"border-gray-300"),placeholder:"Enter quantity"}),x.quantity&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:x.quantity})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location / Destination *"}),(0,a.jsx)("input",{type:"text",value:o.location,onChange:e=>p("location",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(x.location?"border-red-300":"border-gray-300"),placeholder:"Enter location or destination"}),x.location&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:x.location})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Date *"}),(0,a.jsx)("input",{type:"date",value:o.expectedDate,onChange:e=>p("expectedDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 "+(x.expectedDate?"border-red-300":"border-gray-300")}),x.expectedDate&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",children:x.expectedDate})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)(i.$,{type:"button",variant:"secondary",onClick:s,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",variant:"primary",icon:r.A,children:h?"Update Logistics":"Add Logistics"})]})]})})}},6642:(e,s,t)=>{t.d(s,{X:()=>_});var a=t(4848),l=t(6540),r=t(7767),n=t(3459),i=t(904),c=t(1085),d=t(9237),o=t(339),m=t(7596),x=t(3175),u=t(9775),h=t(775),p=t(1314),g=t(1415),j=t(5919),b=t(2341),y=t(1813),v=t(1676);const f=({filmRequirements:e,assignedTrailer:s,onUploadReceipt:t,onRemoveReceipt:r,onMarkCompleted:i,onUpdatePreparationTask:c})=>{const[o,m]=(0,l.useState)([]),[x,u]=(0,l.useState)(!1),h=(0,l.useRef)(null),g=e=>s&&{BR:15,"Riot+":10,Riot:8,"Riot -":5,FER:3,Smash:2,"Tint NI":1,"Tint Incl":1,Anchoring:0,Kevlar:0}[e]||0;return(0,a.jsxs)(b.Z,{className:"p-6 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Logistics"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:s?`${s.trailerName}`:"No trailer"})]}),(0,a.jsx)("div",{className:"mb-4 pb-3 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between text-xs",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:[e.reduce((e,s)=>e+s.required,0)," required"]}),(0,a.jsxs)("span",{className:"text-gray-600",children:[e.reduce((e,s)=>e+g(s.sheetType),0)," in trailer"]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 mb-4 pb-2 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"col-span-5",children:(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Required"})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"In Trailer"})}),(0,a.jsx)("div",{className:"col-span-4",children:(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Need to Ship"})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("div",{className:"space-y-2",children:e.slice(0,4).map(e=>{const s=g(e.sheetType),t=((e,s)=>Math.max(0,e-s))(e.required,s);return(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center py-2",children:[(0,a.jsx)("div",{className:"col-span-5",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.sheetType}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.required," sheets"]})]})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[s," sheets"]})}),(0,a.jsx)("div",{className:"col-span-4",children:(0,a.jsxs)("span",{className:"text-sm font-medium "+(t>0?"text-amber-600":"text-green-600"),children:[t," sheets"]})})]},e.sheetType)})}),e.length>4&&(0,a.jsx)("div",{className:"text-center py-2",children:(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.length-4," more film types"]})})]}),(0,a.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Receipt"}),o.length>0?(0,a.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-3 h-3 text-green-600"}),(0,a.jsx)("span",{className:"text-xs text-green-800 truncate",children:e.fileName}),(0,a.jsxs)("span",{className:"text-xs text-green-600",children:["(",new Date(e.uploadedAt).toLocaleDateString(),")"]})]}),(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,m(e=>e.filter(e=>e.id!==s)),void r(s);var s},className:"p-1 h-5 w-5 text-red-500 hover:text-red-700",title:"Remove attachment",children:(0,a.jsx)(d.A,{className:"w-3 h-3"})})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No attachments uploaded"})]}),(0,a.jsx)("div",{className:"mt-auto pt-4",children:x?(0,a.jsxs)("div",{className:"flex items-center justify-center p-2 bg-green-100 rounded-lg border border-green-200",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-green-600 mr-2"}),(0,a.jsx)("span",{className:"text-xs text-green-800 font-medium",children:"Inventory Completed"})]}):(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(j.$,{variant:"ghost",size:"sm",onClick:()=>h.current?.click(),className:"flex-1",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Add Attachment"]}),o.length>0&&(0,a.jsxs)(j.$,{variant:"primary",size:"sm",onClick:()=>{u(!0),i(),c&&c("Logistics Confirmed",!0)},className:"flex-1",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Mark Completed"]})]})}),(0,a.jsx)("input",{ref:h,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:e=>{const s=e.target.files;s&&s.length>0&&(e=>{const s={id:`receipt-${Date.now()}`,fileName:e.name,fileUrl:URL.createObjectURL(e),uploadedAt:(new Date).toISOString(),uploadedBy:"Current User"};m(e=>[...e,s]),t(e)})(s[0])},className:"hidden"})]})]})};var N=t(82),w=t(894);const k=({isOpen:e,onClose:s,onSave:t,travelType:r,numberOfMembers:i})=>{const[c,o]=(0,l.useState)({travelFrom:"",travelTo:"",travelDate:"",numberOfTickets:i,attachments:[]}),[m,x]=(0,l.useState)({});l.useEffect(()=>{e&&(o(e=>({...e,numberOfTickets:i,attachments:[]})),x({}))},[e,i]);const u=(e,s)=>{o(t=>({...t,[e]:s})),m[e]&&x(s=>({...s,[e]:""}))};return(0,a.jsx)(w.a,{isOpen:e,onClose:s,size:"lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Add Travel Details - ","air"===r?"Air Travel":"Road Travel"]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(d.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"travelFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel From *"}),(0,a.jsx)("input",{type:"text",id:"travelFrom",value:c.travelFrom,onChange:e=>u("travelFrom",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(m.travelFrom?"border-red-300":"border-gray-300"),placeholder:"Enter departure location"}),m.travelFrom&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.travelFrom})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"travelTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel To *"}),(0,a.jsx)("input",{type:"text",id:"travelTo",value:c.travelTo,onChange:e=>u("travelTo",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(m.travelTo?"border-red-300":"border-gray-300"),placeholder:"Enter destination location"}),m.travelTo&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.travelTo})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"travelDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel Date *"}),(0,a.jsx)("input",{type:"date",id:"travelDate",value:c.travelDate,onChange:e=>u("travelDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(m.travelDate?"border-red-300":"border-gray-300")}),m.travelDate&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.travelDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"numberOfTickets",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Tickets *"}),(0,a.jsx)("input",{type:"number",id:"numberOfTickets",min:"1",max:"50",value:c.numberOfTickets,onChange:e=>(e=>{const s=Math.max(1,Math.min(50,e));o(e=>({...e,numberOfTickets:s}))})(parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(m.numberOfTickets?"border-red-300":"border-gray-300")}),m.numberOfTickets&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.numberOfTickets})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Travel Documents"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)("input",{type:"file",id:"file-upload",multiple:!0,onChange:e=>(e=>{if(e){const s=Array.from(e);o(e=>({...e,attachments:[...e.attachments,...s]}))}})(e.target.files),className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"}),(0,a.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[(0,a.jsx)(v.A,{className:"w-8 h-8 text-gray-400"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Click to upload"}),(0,a.jsx)("span",{children:" or drag and drop"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX, PNG, JPG up to 10MB each"})]})]}),c.attachments.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Uploaded Files:"}),c.attachments.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(e.size/1024/1024).toFixed(2)," MB)"]})]}),(0,a.jsx)("button",{onClick:()=>(e=>{o(s=>({...s,attachments:s.attachments.filter((s,t)=>t!==e)}))})(s),className:"text-red-600 hover:text-red-800 p-1",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})})]},s))]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)(j.$,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(j.$,{variant:"primary",onClick:()=>{(()=>{const e={};return c.travelFrom.trim()||(e.travelFrom="Travel from location is required"),c.travelTo.trim()||(e.travelTo="Travel to location is required"),c.travelDate||(e.travelDate="Travel date is required"),c.numberOfTickets<1&&(e.numberOfTickets="At least 1 ticket is required"),x(e),0===Object.keys(e).length})()&&(t(c),s())},children:"Save Travel Details"})]})]})})},C=({isOpen:e,onClose:s,onSave:t})=>{const[r,i]=(0,l.useState)({hotelName:"",checkInDate:"",checkOutDate:"",numberOfRooms:1,reservationSlip:void 0}),[c,o]=(0,l.useState)({});l.useEffect(()=>{e&&(i({hotelName:"",checkInDate:"",checkOutDate:"",numberOfRooms:1,reservationSlip:void 0}),o({}))},[e]);const m=(e,s)=>{i(t=>({...t,[e]:s})),c[e]&&o(s=>({...s,[e]:""}))};return(0,a.jsx)(w.a,{isOpen:e,onClose:s,size:"lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Hotel Reservation Details"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(d.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"hotelName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hotel Name *"}),(0,a.jsx)("input",{type:"text",id:"hotelName",value:r.hotelName,onChange:e=>m("hotelName",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.hotelName?"border-red-300":"border-gray-300"),placeholder:"Enter hotel name"}),c.hotelName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.hotelName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"numberOfRooms",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Rooms *"}),(0,a.jsx)("input",{type:"number",id:"numberOfRooms",min:"1",max:"20",value:r.numberOfRooms,onChange:e=>m("numberOfRooms",parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.numberOfRooms?"border-red-300":"border-gray-300")}),c.numberOfRooms&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.numberOfRooms})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"checkInDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Date *"}),(0,a.jsx)("input",{type:"date",id:"checkInDate",value:r.checkInDate,onChange:e=>m("checkInDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.checkInDate?"border-red-300":"border-gray-300")}),c.checkInDate&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.checkInDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"checkOutDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Date *"}),(0,a.jsx)("input",{type:"date",id:"checkOutDate",value:r.checkOutDate,onChange:e=>m("checkOutDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.checkOutDate?"border-red-300":"border-gray-300")}),c.checkOutDate&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.checkOutDate})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reservation Slip"}),r.reservationSlip?(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:r.reservationSlip.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(r.reservationSlip.size/1024/1024).toFixed(2)," MB)"]})]}),(0,a.jsx)("button",{onClick:()=>{i(e=>({...e,reservationSlip:void 0}))},className:"text-red-600 hover:text-red-800 p-1",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})})]}):(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)("input",{type:"file",id:"reservation-slip-upload",onChange:e=>{const s=e.target.files?.[0];s&&(e=>{i(s=>({...s,reservationSlip:e}))})(s)},className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"}),(0,a.jsxs)("label",{htmlFor:"reservation-slip-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[(0,a.jsx)(v.A,{className:"w-8 h-8 text-gray-400"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Click to upload"}),(0,a.jsx)("span",{children:" or drag and drop"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX, PNG, JPG up to 10MB"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)(j.$,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(j.$,{variant:"primary",onClick:()=>{(()=>{const e={};if(r.hotelName.trim()||(e.hotelName="Hotel name is required"),r.checkInDate||(e.checkInDate="Check-in date is required"),r.checkOutDate||(e.checkOutDate="Check-out date is required"),r.checkInDate&&r.checkOutDate){const s=new Date(r.checkInDate);new Date(r.checkOutDate)<=s&&(e.checkOutDate="Check-out date must be after check-in date")}return r.numberOfRooms<1&&(e.numberOfRooms="At least 1 room is required"),o(e),0===Object.keys(e).length})()&&(t(r),s())},children:"Save Reservation Details"})]})]})})};var S=t(2427);const A=({isOpen:e,onClose:s,onUpload:t})=>{const[r,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(""),u=()=>{c||(i(null),s())};return(0,a.jsx)(w.a,{isOpen:e,onClose:u,size:"lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(n.A,{className:"w-6 h-6 mr-2 text-blue-600"}),"Project Setup"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Ready to begin"})]}),c?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(S.A,{className:"w-8 h-8 text-blue-600 animate-spin"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing Your File"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:m}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"70%"}})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"w-10 h-10 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Upload Take-Off Sheet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Upload your take-off sheet to create window inventory and start working on the project. This will help us track progress and manage the installation process."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",id:"file-upload",accept:".pdf,.xlsx,.xls,.csv",onChange:e=>{const s=e.target.files?.[0];s&&(e=>{i(e)})(s)},className:"hidden"}),(0,a.jsx)("label",{htmlFor:"file-upload",children:(0,a.jsxs)(j.$,{variant:"primary",className:"flex items-center space-x-2 px-6 py-3",disabled:!r,onClick:async()=>{r&&(o(!0),x("Processing take-off sheet and creating windows…"),await new Promise(e=>setTimeout(e,2e3)),x("Generating windows… Please wait"),await new Promise(e=>setTimeout(e,1500)),t(r),i(null),o(!1),x(""))},children:[(0,a.jsx)(v.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:r?`Upload ${r.name}`:"Upload Take-Off Sheet"})]})})]}),(0,a.jsxs)(j.$,{variant:"outline",onClick:()=>{s(),console.log("Manual entry clicked")},className:"flex items-center space-x-2 px-6 py-3",children:[(0,a.jsx)(n.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Enter Manually"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Supported formats: PDF, Excel (.xlsx, .xls), CSV"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Once uploaded, we'll automatically create your window inventory and you can begin tracking progress."}),r&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900",children:r.name}),(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:[(r.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)("button",{onClick:()=>i(null),className:"text-blue-600 hover:text-blue-800",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})})]}),!c&&(0,a.jsx)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:(0,a.jsx)(j.$,{variant:"outline",onClick:u,children:"Cancel"})})]})})};var T=t(799),D=t(2793),M=t(3183),P=t(5891),O=t(4810),I=t(885),R=t(408);const L=({isOpen:e,onClose:s,onSave:t})=>{const[r,n]=(0,l.useState)({windowName:"",filmType:"BR",length:0,width:0,layers:1,status:"Pending",assignedTeamMembers:[],installationBreakdown:[]}),[i,c]=(0,l.useState)({}),o=(e,s)=>{n(t=>({...t,[e]:s})),i[e]&&c(s=>({...s,[e]:""}))},m=()=>{n({windowName:"",filmType:"BR",length:0,width:0,layers:1,status:"Pending",assignedTeamMembers:[],installationBreakdown:[]}),c({}),s()};return(0,a.jsx)(w.a,{isOpen:e,onClose:m,size:"lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Window"}),(0,a.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(d.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"windowName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Window Name *"}),(0,a.jsx)("input",{type:"text",id:"windowName",value:r.windowName,onChange:e=>o("windowName",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(i.windowName?"border-red-300":"border-gray-300"),placeholder:"Enter window name"}),i.windowName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.windowName})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"filmType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Film Type *"}),(0,a.jsx)("select",{id:"filmType",value:r.filmType,onChange:e=>o("filmType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.jd.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"layers",className:"block text-sm font-medium text-gray-700 mb-1",children:"Layers *"}),(0,a.jsx)("input",{type:"number",id:"layers",min:"1",max:"10",value:r.layers,onChange:e=>o("layers",parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(i.layers?"border-red-300":"border-gray-300")}),i.layers&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.layers})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"length",className:"block text-sm font-medium text-gray-700 mb-1",children:"Length (cm) *"}),(0,a.jsx)("input",{type:"number",id:"length",min:"1",step:"0.1",value:r.length,onChange:e=>o("length",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(i.length?"border-red-300":"border-gray-300"),placeholder:"Enter length"}),i.length&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"width",className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (cm) *"}),(0,a.jsx)("input",{type:"number",id:"width",min:"1",step:"0.1",value:r.width,onChange:e=>o("width",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(i.width?"border-red-300":"border-gray-300"),placeholder:"Enter width"}),i.width&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.width})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Status:"}),' This window will be created with "Pending" status. The status will automatically update to "Updated" when you make changes.']})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)(j.$,{variant:"outline",onClick:m,children:"Cancel"}),(0,a.jsx)(j.$,{variant:"primary",onClick:()=>{(()=>{const e={};return r.windowName.trim()||(e.windowName="Window name is required"),r.length<=0&&(e.length="Length must be greater than 0"),r.width<=0&&(e.width="Width must be greater than 0"),r.layers<1&&(e.layers="At least 1 layer is required"),c(e),0===Object.keys(e).length})()&&(t(r),n({windowName:"",filmType:"BR",length:0,width:0,layers:1,status:"Pending",assignedTeamMembers:[],installationBreakdown:[]}),c({}))},children:"Add Window"})]})]})})},U=({isOpen:e,onClose:s,onSave:t,window:r})=>{const[n,i]=(0,l.useState)({windowName:"",filmType:"BR",length:0,width:0,layers:1,status:"Pending",assignedTeamMembers:[],installationBreakdown:[]}),[c,o]=(0,l.useState)({});(0,l.useEffect)(()=>{r&&i({windowName:r.windowName,filmType:r.filmType,length:r.length,width:r.width,layers:r.layers,status:r.status,assignedTeamMembers:r.assignedTeamMembers,installationBreakdown:r.installationBreakdown})},[r]);const m=(e,s)=>{i(t=>({...t,[e]:s})),c[e]&&o(s=>({...s,[e]:""}))},x=()=>{o({}),s()};return r?(0,a.jsx)(w.a,{isOpen:e,onClose:x,size:"lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Window"}),(0,a.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(d.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"windowName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Window Name *"}),(0,a.jsx)("input",{type:"text",id:"windowName",value:n.windowName,onChange:e=>m("windowName",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.windowName?"border-red-300":"border-gray-300"),placeholder:"Enter window name"}),c.windowName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.windowName})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"filmType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Film Type *"}),(0,a.jsx)("select",{id:"filmType",value:n.filmType,onChange:e=>m("filmType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.jd.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"layers",className:"block text-sm font-medium text-gray-700 mb-1",children:"Layers *"}),(0,a.jsx)("input",{type:"number",id:"layers",min:"1",max:"10",value:n.layers,onChange:e=>m("layers",parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.layers?"border-red-300":"border-gray-300")}),c.layers&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.layers})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"length",className:"block text-sm font-medium text-gray-700 mb-1",children:"Length (cm) *"}),(0,a.jsx)("input",{type:"number",id:"length",min:"1",step:"0.1",value:n.length,onChange:e=>m("length",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.length?"border-red-300":"border-gray-300"),placeholder:"Enter length"}),c.length&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"width",className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (cm) *"}),(0,a.jsx)("input",{type:"number",id:"width",min:"1",step:"0.1",value:n.width,onChange:e=>m("width",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(c.width?"border-red-300":"border-gray-300"),placeholder:"Enter width"}),c.width&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.width})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Current Status"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:'This window will be marked as "Updated" after saving changes.'})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:n.status})})]})}),n.installationBreakdown.length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Installation Progress"}),(0,a.jsx)("div",{className:"space-y-2",children:n.installationBreakdown.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm px-3 py-2 rounded "+("installed"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(0,a.jsx)("span",{children:e.layerName}),(0,a.jsx)("span",{className:"font-medium",children:e.installerName})]},s))}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Installation progress will be preserved after editing."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)(j.$,{variant:"outline",onClick:x,children:"Cancel"}),(0,a.jsx)(j.$,{variant:"primary",onClick:()=>{(()=>{const e={};return n.windowName.trim()||(e.windowName="Window name is required"),n.length<=0&&(e.length="Length must be greater than 0"),n.width<=0&&(e.width="Width must be greater than 0"),n.layers<1&&(e.layers="At least 1 layer is required"),o(e),0===Object.keys(e).length})()&&(t({...n,status:"Updated"}),s())},children:"Save Changes"})]})]})}):null};var q=t(1523),$=t(5732),F=t(7177),B=t(2025);const E=({isOpen:e,onClose:s,window:t,onUpdate:l})=>{if(!t)return null;const r=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=()=>{if(0===t.layers)return 0;const e=t.installationBreakdown.filter(e=>"installed"===e.status).length;return Math.round(e/t.layers*100)};return(0,a.jsx)(w.a,{isOpen:e,onClose:s,size:"xl",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(e=>{switch(e){case"Pending":default:return(0,a.jsx)(q.A,{className:"w-5 h-5 text-gray-500"});case"Updated":return(0,a.jsx)(q.A,{className:"w-5 h-5 text-blue-500"});case"In Progress":return(0,a.jsx)(q.A,{className:"w-5 h-5 text-yellow-500"});case"Complete":return(0,a.jsx)(p.A,{className:"w-5 h-5 text-green-500"});case"Reinstallation Needed":return(0,a.jsx)($.A,{className:"w-5 h-5 text-red-500"})}})(t.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t.windowName}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Created ",r(t.createdAt)]})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${R.pE[t.status]}`,children:R.UA[t.status]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Film Type"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.filmType})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Dimensions"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-900",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[t.length," × ",t.width," cm"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Layers"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-900",children:[(0,a.jsx)(B.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.layers})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Details"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:(e=>{switch(e){case"Pending":return"This window is newly created and waiting for assignment or work to begin.";case"Updated":return"This window has been modified and is ready for review or assignment.";case"In Progress":return"This window is currently being worked on by assigned team members.";case"Complete":return"All layers have been successfully installed and the window is complete.";case"Reinstallation Needed":return"Some layers require reinstallation due to issues or quality concerns.";default:return"Status information not available."}})(t.status)}),"In Progress"===t.status&&t.assignedTeamMembers.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Assigned Team Members:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Users,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[t.assignedTeamMembers.length," members assigned"]})]})]})]})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Installation Progress"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[(0,a.jsx)("span",{children:"Overall Progress"}),(0,a.jsxs)("span",{children:[n(),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${n()}%`}})})]}),(0,a.jsx)("div",{className:"space-y-2",children:Array.from({length:t.layers},(e,s)=>{const l=s+1,n=t.installationBreakdown.find(e=>e.layerNumber===l);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border "+("installed"===n?.status?"bg-green-50 border-green-200":"reinstallation_needed"===n?.status?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:["installed"===n?.status?(0,a.jsx)(p.A,{className:"w-5 h-5 text-green-600"}):"reinstallation_needed"===n?.status?(0,a.jsx)($.A,{className:"w-5 h-5 text-red-600"}):(0,a.jsx)(q.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Layer ",l]})]}),(0,a.jsx)("div",{className:"text-right",children:n?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.installerName}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:r(n.installedAt)})]}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Not installed"})})]},l)})})]})})]}),(0,a.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:t.installationBreakdown.some(e=>"installed"===e.status)&&(0,a.jsxs)(j.$,{variant:"outline",onClick:()=>{const e=t.installationBreakdown.find(e=>"installed"===e.status)?.layerNumber;e&&(e=>{const s=t.installationBreakdown.map(s=>s.layerNumber===e?{...s,status:"reinstallation_needed"}:s),a={...t,installationBreakdown:s,status:"Reinstallation Needed",updatedAt:(new Date).toISOString()};l(a)})(e)},className:"flex items-center space-x-2 text-red-600 border-red-300 hover:bg-red-50",children:[(0,a.jsx)($.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Mark for Reinstallation"})]})})}),(0,a.jsx)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:(0,a.jsx)(j.$,{variant:"outline",onClick:s,children:"Close"})})]})})};var z=t(8931),W=t(5426);const Z=({windows:e,onWindowClick:s,onEditClick:t,onDeleteClick:r})=>{const[n,c]=(0,l.useState)(null),d=e=>{c(null),window.confirm("Are you sure you want to remove this window?")&&r(e)};return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{return(0,a.jsxs)(b.Z,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer relative group",onClick:()=>s(e),children:[(0,a.jsx)("div",{className:"absolute top-3 right-3",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:s=>{var t;s.stopPropagation(),t=e.id,c(n===t?null:t)},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(z.A,{className:"w-4 h-4"})}),n===e.id&&(0,a.jsx)("div",{className:"absolute right-0 top-8 z-10 w-32 bg-white border border-gray-200 rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),(e=>{c(null),s(e)})(e)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(W.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"View"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),(e=>{c(null),t(e)})(e)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),d(e.id)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,a.jsx)(N.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Delete"})]})]})})]})}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate pr-8",children:e.windowName}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Created ",(l=e.createdAt,new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))]})]}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.pE[e.status]}`,children:R.UA[e.status]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Film:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.filmType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Size:"}),(0,a.jsxs)("span",{className:"ml-1 font-medium",children:[e.length,"×",e.width,"cm"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Layers:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.layers})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Team:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.assignedTeamMembers.length})]})]}),e.installationBreakdown.length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Progress:"}),(0,a.jsxs)("div",{className:"space-y-1",children:[e.installationBreakdown.slice(0,2).map((e,s)=>(0,a.jsxs)("div",{className:"text-xs px-2 py-1 rounded "+("installed"===e.status?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:[e.layerName," - ",e.installerName]},s)),e.installationBreakdown.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.installationBreakdown.length-2," more"]})]})]})]},e.id);var l})})},Q=({windows:e,onWindowClick:s,onEditClick:t,onDeleteClick:r})=>{const[n,c]=(0,l.useState)(null);(0,l.useEffect)(()=>{const e=e=>{n&&c(null)};return n&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[n]);const d=e=>{c(null),window.confirm("Are you sure you want to remove this window?")&&r(e)};return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,a.jsx)("div",{className:"col-span-3",children:"Window Name"}),(0,a.jsx)("div",{className:"col-span-2",children:"Film Type"}),(0,a.jsx)("div",{className:"col-span-2",children:"Dimensions"}),(0,a.jsx)("div",{className:"col-span-1",children:"Layers"}),(0,a.jsx)("div",{className:"col-span-2",children:"Status"}),(0,a.jsx)("div",{className:"col-span-1",children:"Installation Progress"}),(0,a.jsx)("div",{className:"col-span-1",children:"Actions"})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>{return(0,a.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>s(e),children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.windowName}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Created ",(l=e.createdAt,new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))]})]})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.filmType})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.length," × ",e.width," cm"]})]})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(B.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.layers})]})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.pE[e.status]}`,children:R.UA[e.status]})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.installationBreakdown.length>0?(0,a.jsx)("div",{className:"space-y-2",children:e.installationBreakdown.map((e,s)=>(0,a.jsx)("div",{className:"block",children:(0,a.jsxs)("span",{className:"text-gray-700",children:[e.layerName," - ",e.installerName]})},s))}):(0,a.jsx)("span",{className:"text-gray-400",children:"No progress"})})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)("div",{className:"relative flex justify-end",children:[(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:s=>{var t;s.stopPropagation(),t=e.id,c(n===t?null:t)},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(z.A,{className:"w-4 h-4"})}),n===e.id&&(0,a.jsx)("div",{className:"absolute right-0 top-8 z-10 w-32 bg-white border border-gray-200 rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),(e=>{c(null),s(e)})(e)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(W.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"View"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),(e=>{c(null),t(e)})(e)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),d(e.id)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,a.jsx)(N.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Delete"})]})]})})]})})]})},e.id);var l})})]})};var V=t(7235);const J=({windows:e=R.xw,onWindowUpdate:s})=>{const{showToast:t}=(0,V.d)(),[r,n]=(0,l.useState)(e),[i,c]=(0,l.useState)("");(0,l.useEffect)(()=>{n(e)},[e]);const[m,x]=(0,l.useState)({filmType:"All",status:"All",assignedTeamMember:"All"}),[u,h]=(0,l.useState)({type:"list"}),[p,g]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[f,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(null),[A,q]=(0,l.useState)(1),$=(0,l.useMemo)(()=>r.filter(e=>{const s=e.windowName.toLowerCase().includes(i.toLowerCase()),t="All"===m.filmType||e.filmType===m.filmType,a="All"===m.status||e.status===m.status,l="All"===m.assignedTeamMember||e.assignedTeamMembers.includes(m.assignedTeamMember);return s&&t&&a&&l}),[r,i,m]),F=Math.ceil($.length/10),B=10*(A-1),z=B+10,W=$.slice(B,z);l.useEffect(()=>{q(1)},[i,m]),(0,l.useMemo)(()=>{const e=new Set;return r.forEach(s=>{s.assignedTeamMembers.forEach(s=>e.add(s))}),Array.from(e)},[r]);const J=e=>{n(s=>s.filter(s=>s.id!==e)),t("Window removed successfully")},_=e=>{S(e),N(!0)},G=e=>{k(e),v(!0)},H=(e,s)=>{x(t=>({...t,[e]:s}))};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"w-full px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row items-start xl:items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Window Management"})}),(0,a.jsxs)("div",{className:"relative flex-1 min-w-0 sm:max-w-md",children:[(0,a.jsx)(T.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by window name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>c(e.target.value)}),i&&(0,a.jsx)("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(d.A,{size:16})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),(0,a.jsxs)("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 min-w-0",value:m.filmType,onChange:e=>H("filmType",e.target.value),children:[(0,a.jsx)("option",{value:"All",children:"All Film Types"}),R.jd.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,a.jsxs)("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 min-w-0",value:m.status,onChange:e=>H("status",e.target.value),children:[(0,a.jsx)("option",{value:"All",children:"All Status"}),Object.entries(R.UA).map(([e,s])=>(0,a.jsx)("option",{value:e,children:s},e))]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(j.$,{variant:"primary",onClick:()=>g(!0),className:"flex items-center space-x-2 flex-shrink-0",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Window"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>h({type:"list"}),className:"p-2 rounded-md transition-colors "+("list"===u.type?"bg-white shadow-sm text-gray-900":"text-gray-500 hover:text-gray-700"),children:(0,a.jsx)(M.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>h({type:"grid"}),className:"p-2 rounded-md transition-colors "+("grid"===u.type?"bg-white shadow-sm text-gray-900":"text-gray-500 hover:text-gray-700"),children:(0,a.jsx)(P.A,{className:"w-4 h-4"})})]})]})]}),0===W.length?(0,a.jsxs)(b.Z,{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(T.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No windows found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:i||Object.values(m).some(e=>"All"!==e)?"Try adjusting your search or filters":"No windows yet. Upload a sheet or add manually."}),(0,a.jsxs)(j.$,{variant:"primary",onClick:()=>g(!0),className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Window"})]})]}):(0,a.jsxs)(a.Fragment,{children:["list"===u.type?(0,a.jsx)(Q,{windows:W,onWindowClick:_,onEditClick:G,onDeleteClick:J}):(0,a.jsx)(Z,{windows:W,onWindowClick:_,onEditClick:G,onDeleteClick:J}),F>1&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",B+1," to ",Math.min(z,$.length)," of ",$.length," windows"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(j.$,{variant:"ghost",size:"sm",onClick:()=>{A>1&&q(A-1)},disabled:1===A,className:"flex items-center space-x-1",children:[(0,a.jsx)(O.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Previous"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,F)},(e,s)=>{let t;return t=F<=5||A<=3?s+1:A>=F-2?F-4+s:A-2+s,(0,a.jsx)("button",{onClick:()=>{return e=t,void q(Math.max(1,Math.min(e,F)));var e},className:"px-3 py-1 text-sm rounded-md "+(A===t?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:t},t)})}),(0,a.jsxs)(j.$,{variant:"ghost",size:"sm",onClick:()=>{A<F&&q(A+1)},disabled:A===F,className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(I.A,{className:"w-4 h-4"})]})]})]})]}),(0,a.jsx)(L,{isOpen:p,onClose:()=>g(!1),onSave:e=>{const s={...e,id:`win-${Date.now()}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),projectId:"proj-001"};n(e=>[...e,s]),g(!1),t("Window added successfully")}}),(0,a.jsx)(U,{isOpen:y,onClose:()=>{v(!1),k(null)},onSave:e=>{if(!w)return;const a={...w,...e,status:"Updated",updatedAt:(new Date).toISOString()};n(e=>e.map(e=>e.id===w.id?a:e)),s?.(a),v(!1),k(null),t("Window updated successfully")},window:w}),(0,a.jsx)(E,{isOpen:f,onClose:()=>{N(!1),S(null)},window:C,onUpdate:e=>{n(s=>s.map(s=>s.id===e.id?e:s)),s?.(e),S(e)}})]})})},_=({assignedTeam:e,travelPlans:s,assignedTrailer:t,projectFilmRequirements:y,onViewTeam:v,onAssignTeam:N,onEditTeam:w,onRemoveTeamMember:S,onSetupTravel:T,onAddTravel:D,onEditTravel:M,onDeleteTravel:P,onAssignTrailer:O,onNotifyHouseManager:I,onUploadReceipt:R,onRemoveReceipt:L,onMarkCompleted:U,onUpdatePreparationTask:q,selectedStage:$="preparation",windows:F=[],onWindowUpdate:B})=>{const{showToast:E}=(0,V.d)(),z=(0,r.Zp)(),{projectId:W}=(0,r.g)(),[Z,Q]=(0,l.useState)({travelRequired:!1,travelType:null,airTravelMembers:1,roadTravelMembers:1,hotelRequired:!1}),[_,G]=(0,l.useState)(!1),[H,X]=(0,l.useState)(!1),[K,Y]=(0,l.useState)(!1),[ee,se]=(0,l.useState)(!1),[te,ae]=(0,l.useState)(!1),[le,re]=(0,l.useState)(null),[ne,ie]=(0,l.useState)(null),ce=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),de=e=>{Q(s=>({...s,travelType:e}))},[oe,me]=(0,l.useState)(!1),[xe,ue]=(0,l.useState)(!1),[he,pe]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8 items-stretch",children:["wip"===$?(0,a.jsx)("div",{className:"lg:col-span-4",children:he?(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Window Management"})]})}),(0,a.jsx)("div",{className:"p-0",children:(0,a.jsx)(J,{windows:F,onWindowUpdate:B})})]}):(0,a.jsxs)(b.Z,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Setup"})]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Ready to begin"})]}),xe?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Processing Take-Off Sheet"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4 max-w-md mx-auto",children:"Creating window inventory and setting up project workspace..."}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"70%"}})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"This may take a few moments"})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Take-Off Sheet"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6 max-w-md mx-auto",children:"Upload your take-off sheet to create window inventory and start working on the project. This will help us track progress and manage the installation process."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,a.jsx)(j.$,{variant:"primary",size:"md",icon:n.A,onClick:()=>{ue(!0),setTimeout(()=>{E("Take-off sheet uploaded successfully! Windows created."),ue(!1),pe(!0)},2e3)},className:"px-6 py-2",children:"Upload Take-Off Sheet"}),(0,a.jsx)(j.$,{variant:"secondary",size:"md",icon:i.A,onClick:()=>{E("Manual window entry opened")},className:"px-6 py-2",children:"Enter Manually"})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[(0,a.jsx)("strong",{children:"Supported formats:"})," PDF, Excel (.xlsx, .xls), CSV"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Once uploaded, we'll automatically create your window inventory and you can begin tracking progress."})]})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b.Z,{className:"p-6 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assigned Team"})]}),e&&(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[e.count," member",1!==e.count?"s":""]})]}),e&&e.members.length>0?(0,a.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 mb-4 min-h-0",children:e.members.map(s=>(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center text-sm font-medium text-blue-600",children:s.name.split(" ").map(e=>e[0]).join("")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:s.role}),s.location&&(0,a.jsx)("p",{className:"text-xs text-gray-400 truncate",children:s.location})]})]}),(0,a.jsx)("button",{onClick:()=>(s=>{const t=e?.members.find(e=>e.id===s);t&&(E(`${t.name} removed from team`),S(s))})(s.id),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove team member",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})},s.id))}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsxs)(j.$,{variant:"primary",size:"sm",onClick:N,className:"w-full",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})})]}):(0,a.jsxs)("div",{className:"text-center py-8 flex-1 flex flex-col justify-center",children:[(0,a.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"No team assigned yet"}),(0,a.jsx)(j.$,{variant:"primary",size:"sm",onClick:N,className:"w-full mt-auto",children:"Assign Team"})]})]}),(0,a.jsxs)(b.Z,{className:"p-6 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-amber-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assign Trailer"})]}),t&&(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:O,icon:x.A,children:"Change"})]}),t?(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:t.trailerName}),(0,a.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:t.registrationNumber})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Location:"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t.location})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("available"===t.status?"bg-green-100 text-green-800":"in-use"===t.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.status})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Films in Trailer:"}),(0,a.jsx)("div",{className:"space-y-1",children:(t?[{type:"BR",quantity:15},{type:"Riot+",quantity:10},{type:"Riot",quantity:8},{type:"Riot -",quantity:5},{type:"FER",quantity:3},{type:"Smash",quantity:2},{type:"Tint NI",quantity:1},{type:"Tint Incl",quantity:1}].filter(e=>e.quantity>0):[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-gray-600",children:e.type}),(0,a.jsxs)("span",{className:"text-gray-500",children:[e.quantity," sheets"]})]},s))})]}),t.notes&&(0,a.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Notes:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.notes})]})]})]})}):(0,a.jsxs)("div",{className:"text-center py-8 flex-1 flex flex-col justify-center",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"No trailer assigned yet"}),(0,a.jsx)(j.$,{variant:"primary",size:"sm",onClick:O,className:"w-full mt-auto",children:"Assign Trailer"})]})]}),(0,a.jsx)(f,{filmRequirements:y,assignedTrailer:t,onUploadReceipt:R,onRemoveReceipt:L,onMarkCompleted:U,onUpdatePreparationTask:q}),(0,a.jsxs)(b.Z,{className:"p-6 flex flex-col",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Travel & Accommodation"})]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"travel-required",checked:Z.travelRequired,onChange:e=>{return s=e.target.checked,Q(e=>({...e,travelRequired:s,travelType:s?e.travelType:null})),void(s?(E("Travel setup initiated - please select travel type"),G(!0),X(!0)):G(!1));var s},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,a.jsx)("label",{htmlFor:"travel-required",className:"text-sm font-medium text-gray-700",children:"Travel Required"})]}),Z.travelRequired&&!le&&(0,a.jsxs)("div",{className:"ml-7 space-y-3 border-l-2 border-gray-200 pl-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"radio",id:"travel-road",name:"travel-type",checked:"road"===Z.travelType,onChange:()=>de("road"),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"}),(0,a.jsxs)("label",{htmlFor:"travel-road",className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Travel by Road"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"radio",id:"travel-air",name:"travel-type",checked:"air"===Z.travelType,onChange:()=>de("air"),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"}),(0,a.jsxs)("label",{htmlFor:"travel-air",className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Travel by Air"})]})]})]}),"road"===Z.travelType&&(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"road-members",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of team members requiring road travel"}),(0,a.jsx)("input",{type:"number",id:"road-members",min:"1",max:"50",value:Z.roadTravelMembers,onChange:e=>{return s=parseInt(e.target.value)||1,void Q(e=>({...e,roadTravelMembers:Math.max(1,Math.min(50,s))}));var s},className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),"air"===Z.travelType&&(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"air-members",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of team members requiring air travel"}),(0,a.jsx)("input",{type:"number",id:"air-members",min:"1",max:"50",value:Z.airTravelMembers,onChange:e=>{return s=parseInt(e.target.value)||1,void Q(e=>({...e,airTravelMembers:Math.max(1,Math.min(50,s))}));var s},className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),Z.travelType&&!K&&(0,a.jsxs)(j.$,{variant:"primary",size:"sm",onClick:()=>{"road"===Z.travelType?(I(),E(`Road travel arranged for ${Z.roadTravelMembers} team members`)):"air"===Z.travelType&&(I(),E(`Air travel arranged for ${Z.airTravelMembers} team members`)),q?.("Travel Setup",!0),Y(!0)},className:"w-full",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Submit Travel Arrangement"]}),K&&Z.travelType&&!le&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)(j.$,{variant:"secondary",size:"sm",onClick:()=>{se(!0)},className:"w-full",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Add Travel Details"]})})]}),le&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Reservation Details Added"})]}),(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>{se(!0)},className:"text-blue-600 hover:text-blue-800 p-2",title:"Edit travel details",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Route:"}),(0,a.jsxs)("span",{className:"text-blue-900 font-medium",children:[le.travelFrom," → ",le.travelTo]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Tickets:"}),(0,a.jsxs)("span",{className:"text-blue-900 font-medium",children:[le.numberOfTickets," ticket",1!==le.numberOfTickets?"s":""]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Attachments:"}),(0,a.jsxs)("span",{className:"text-blue-900 font-medium",children:[le.attachments.length," file",1!==le.attachments.length?"s":""]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"hotel-required",checked:Z.hotelRequired,onChange:e=>{return s=e.target.checked,Q(e=>({...e,hotelRequired:s})),void(s&&(E("Reminder sent to house manager to do arrangement"),I(),q?.("Travel Setup",!0),X(!0),G(!0)));var s},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,a.jsxs)("label",{htmlFor:"hotel-required",className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Hotel Reservation Required"})]})]}),Z.hotelRequired&&!ne&&(0,a.jsx)("div",{className:"ml-7",children:(0,a.jsxs)(j.$,{variant:"secondary",size:"sm",onClick:()=>{ae(!0)},className:"w-full",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Add Reservation Details"]})}),ne&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Hotel Reservation Details Added"})]}),(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>{ae(!0)},className:"text-blue-600 hover:text-blue-800 p-2",title:"Edit hotel reservation details",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Hotel:"}),(0,a.jsx)("span",{className:"text-blue-900 font-medium",children:ne.hotelName})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Check-in:"}),(0,a.jsx)("span",{className:"text-blue-900 font-medium",children:ce(ne.checkInDate)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Check-out:"}),(0,a.jsx)("span",{className:"text-blue-900 font-medium",children:ce(ne.checkOutDate)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Rooms:"}),(0,a.jsxs)("span",{className:"text-blue-900 font-medium",children:[ne.numberOfRooms," room",1!==ne.numberOfRooms?"s":""]})]}),ne.reservationSlip&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Reservation Slip:"}),(0,a.jsx)("span",{className:"text-blue-900 font-medium",children:"1 file"})]})]})]})]})})]})]}),(0,a.jsx)(k,{isOpen:ee,onClose:()=>{se(!1)},onSave:e=>{re(e),E("Travel details saved successfully")},travelType:Z.travelType||"air",numberOfMembers:"air"===Z.travelType?Z.airTravelMembers:Z.roadTravelMembers}),(0,a.jsx)(C,{isOpen:te,onClose:()=>{ae(!1)},onSave:e=>{ie(e),E("Hotel reservation details saved successfully!")}}),(0,a.jsx)(A,{isOpen:oe,onClose:()=>{me(!1)},onUpload:e=>{E(`Take-off sheet "${e.name}" uploaded successfully! Windows created.`),me(!1),W&&z(`/projects/${W}/windows`)}})]})}},9809:(e,s,t)=>{t.d(s,{r:()=>c});var a=t(4848),l=t(6540),r=t(3573),n=t(5919),i=t(894);const c=({isOpen:e,onClose:s,onConfirm:t,projectTitle:c,projectStatus:d,initialStartDate:o="",initialEndDate:m=""})=>{const[x,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[g,j]=(0,l.useState)({}),[b,y]=(0,l.useState)(null);return(0,l.useEffect)(()=>{e&&(u(o),p(m),j({}),y(null))},[e,o,m]),(0,l.useEffect)(()=>{if(x&&h){const e=new Date(x),s=new Date(h);if(e<s){const t=Math.abs(s.getTime()-e.getTime()),a=Math.ceil(t/864e5);y(`${a} days`)}else y(null)}else y(null)},[x,h]),(0,a.jsx)(i.a,{isOpen:e,onClose:s,title:`Set Project Dates for ${c}`,children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["This project is in the ",(0,a.jsx)("span",{className:"font-semibold",children:(e=>{switch(e){case"PV90":return"PV90 (Pre-Visit 90 days)";case"UB":return"UB (Under Budget)";case"WB":return"WB (Within Budget)";default:return e}})(d)})," stage. Please set the estimated start and end dates for project planning and scheduling."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Start Date *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"date",id:"startDate",value:x,onChange:e=>u(e.target.value),min:(new Date).toISOString().split("T")[0],className:`w-full px-3 py-2 border ${g.startDate?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500`}),(0,a.jsx)(r.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"})]}),g.startDate&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.startDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project End Date *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"date",id:"endDate",value:h,onChange:e=>p(e.target.value),min:(()=>{if(x){const e=new Date(x);return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}return(new Date).toISOString().split("T")[0]})(),disabled:!x,className:`w-full px-3 py-2 border ${g.endDate?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 ${x?"":"bg-gray-100 cursor-not-allowed"}`}),(0,a.jsx)(r.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"})]}),g.endDate&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.endDate})]})]}),b&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-green-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Estimated Project Duration:"})," ",b]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)(n.$,{variant:"secondary",onClick:s,children:"Cancel"}),(0,a.jsx)(n.$,{variant:"primary",onClick:()=>{(()=>{const e={},s=(new Date).toISOString().split("T")[0];return x?x<s&&(e.startDate="Start date cannot be in the past"):e.startDate="Start date is required",h?x&&h&&new Date(h)<new Date(x)&&(e.endDate="End date cannot be before start date"):e.endDate="End date is required",j(e),0===Object.keys(e).length})()&&(t(x,h),s())},children:"Save Dates"})]})]})})}}}]);